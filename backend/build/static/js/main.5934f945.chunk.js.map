{"version":3,"sources":["components/TactileButtonNotification.jsx","components/PioreactorIcon.jsx","components/Drawer.jsx","components/Header.jsx","components/LogTable.jsx","components/ExperimentSummary.jsx","components/Chart.jsx","components/MediaCard.jsx","components/ClearChartButton.jsx","components/ClearLogButton.jsx","ExperimentOverview.jsx","DownloadData.jsx","utilities.js","components/ButtonChangeDosingDialog.jsx","components/ActionPumpForm.jsx","Pioreactors.jsx","components/CleaningScript.jsx","components/StartSensors.jsx","components/StartCalculations.jsx","StartNewExperiment.jsx","EditConfig.jsx","App.jsx","serviceWorker.js","index.js"],"names":["TactileButtonNotification","props","React","useState","unit","setUnit","renamedUnit","setRenamedUnit","open","setOpen","useEffect","config","client","remote","Client","ws_url","Math","random","connect","onSuccess","subscribe","join","qos","timeout","onMessageArrived","msg","payloadString","topic","split","Snackbar","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","key","transitionDuration","enter","Alert","severity","variant","icon","AlertTitle","style","fontSize","PioreactorIcon","SvgIcon","id","stroke","strokeWidth","fill","fillColor","fillRule","transform","d","cx","cy","r","SideDrawer","isOpen","setIsOpen","isSelected","path","window","location","pathname","toggleDrawer","event","type","Fragment","IconButton","color","aria-label","edge","onClick","Drawer","anchor","onOpen","role","onKeyDown","alt","src","width","marginLeft","marginTop","List","ListItem","href","component","button","selected","ListItemIcon","ListItemText","primary","Divider","useStyles","makeStyles","theme","root","flexGrow","title","Header","classes","className","AppBar","position","Toolbar","Typography","Link","underline","height","target","rel","Button","textTransform","verticalAlign","LogTable","state","listOfLogs","onConnect","bind","fetch","then","response","json","data","setState","this","getData","message","length","pop","payload","unshift","timestamp","moment","format","is_error","includes","is_warning","string","slice","name","Card","CardContent","Box","fontWeight","TableContainer","overflowY","Table","stickyHeader","size","TableHead","TableRow","TableCell","clsx","headerCell","TableBody","map","log","i","tightCell","smallText","errorLog","warningLog","renameUnit","Component","withStyles","padding","backgroundColor","tightRight","textAlign","cardContent","pos","marginBottom","textIcon","margin","EditableDescription","handleChange","evt","desc","value","onBlur","originalDesc","method","body","JSON","stringify","experiment","description","headers","res","status","openSnackBar","handleSnackbarClose","e","reason","render","innerRef","contentEditable","html","disabled","onChange","tagName","createRef","prevProps","ExperimentSummary","experimentMetadata","startedAt","display","justifyContent","marginRight","float","diff","colors","Chart","createToolTip","datum","x","renameAndFormatSeries","childName","round","y","seriesMap","hiddenSeries","Set","names","legendEvents","selectLegendData","selectVictoryLines","dataFile","initialSeriesMap","entries","v","filter","filterDataPoints","item","Object","keys","createLegendEvents","idx","eventKey","String","eventHandlers","mutation","delete","add","retained","currentTime","isODReading","push","parseFloat","newSeriesMap","error","console","match","results","index","sensor","breakString","totalLength","line","symbol","has","interpolation","labels","parent","border","VictoryVoronoiContainer","createContainer","maxHeight","domainPadding","left","right","bottom","top","events","responsive","scale","VictoryTheme","material","containerComponent","voronoiBlacklist","labelComponent","cornerRadius","flyoutStyle","text","textAnchor","fontFamily","tickLabels","offsetY","orientation","crossAxis","dependentAxis","domain","label","yAxisLabel","axisLabelComponent","dy","symbolSpacer","itemsPerRow","borderPadding","cursor","gutter","MediaCard","mediaThroughputPerUnit","altMediaThroughputPerUnit","mediaThroughput","altMediaThroughput","rates","all","mediaRate","altMediaRate","activeUnits","prevState","getRecentRates","hash","object","hasOwnProperty","topicParts","destinationName","objectRef","totalRef","addOrUpdate","total","values","reduce","a","b","align","scope","toFixed","ClearChartButton","jobName","Message","publish","reload","ClearLogButton","Overview","setExperimentMetadata","getLatestExperiment","Grid","container","spacing","justify","xs","paddingRight","md","paddingLeft","formControl","caption","maxWidth","ExperimentSelection","experiments","setExperiments","FormControl","FormLabel","Select","native","inputProps","CheckboxesGroup","FormGroup","FormControlLabel","control","Checkbox","checked","isChecked","growth_rates","gutterBottom","dosing_events","od_readings_raw","od_readings_filtered","logs","alt_media_fraction","dosing_algorithm_settings","DownloadDataFormContainer","isRunning","setIsRunning","isError","setIsError","errorMsg","setErrorMsg","experimentSelection","datasetCheckbox","runningFeedback","CircularProgress","errorFeedbackOrDefault","preventDefault","some","link","document","createElement","setAttribute","appendChild","click","remove","catch","DownloadData","parseINIString","regex","section","param","comment","lines","forEach","test","textFieldCompact","unitTitle","unitTitleDialog","suptitle","SilentForm","defaults","duration","updateParent","TextField","defaultValue","InputProps","endAdornment","InputAdornment","PIDTurbidostatForm","volume","target_od","onSettingsChange","PIDMorbidostatForm","target_growth_rate","ButtonChangeDosingDialog","dosing_algorithm","algoSettings","setAlgoSettings","isClicked","setIsClicked","setClient","updateFromChild","setting","currentDosingAlgorithm","Dialog","aria-labelledby","PaperProps","DialogTitle","DialogContent","mode","switchToForm","actionTextField","actionForm","actionToAct","ActionPumpForm","mL","setML","setDuration","isMLDisabled","setIsMLDisabled","isDurationDisabled","setIsDurationDisabled","openSnackbar","setOpenSnackbar","action","params","ml","source_of_event","URLSearchParams","replace","pioreactorCard","disabledText","textbox","textboxLabel","footnote","textField","textFieldWide","slider","divider","TabPanel","children","other","hidden","UnitSettingDisplay","stateDisplay","default","MQTTConnect","passChildData","clientId","parsedFloat","isNaN","isStateSetting","isUnitActive","displaySettings","precision","measurementUnit","ButtonConfirmStopProcessDialog","handleClose","aria-describedby","DialogContentText","DialogActions","autoFocus","AddNewPioreactor","snackbarOpen","setSnackbarOpen","setName","startAdornment","newPioreactorName","ok","Error","PioreactorHeader","PatientButton","buttonText","setButtonText","disableElevation","SettingsActionsDialog","defaultStirring","setDefaultStirring","snackbarMessage","setSnackbarMessage","tabValue","setTabValue","setPioreactorJobState","job","sendMessage","setTimeout","startPioreactorJob","job_attr","setPioreactorJobAttr","setPioreactorJobAttrOnEnter","fetchData","createUserButtonsBasedOnState","jobState","parentJob","odButtons","ODReadingJobState","grButtons","growthRateJobState","ioButtons","IOEventsJobState","stirringButtons","stirringJobState","Tabs","newValue","indicatorColor","textColor","Tab","isPlural","Slider","parseInt","stirringDCState","step","valueLabelDisplay","onChangeCommitted","marks","volumeState","onKeyPress","targetODState","durationState","targetGrowthRateState","dosingAlgorithm","SettingsActionsDialogAll","hrJobs","jobButton","ActiveUnits","units","PioreactorCard","FlashLEDButton","setStirringDCState","setStirringJobState","setODReadingJobState","setGrowthRateJobState","setIOEventsJobState","temperatureControllingJobState","setTemperatureControllingJobState","setTargetODState","setDurationState","setTargetGrowthRateState","setVolumeState","setDosingAlgorithm","temperature","setTemperature","alignRight","InactiveUnits","Pioreactors","actionsContainer","resetContainer","divInstructions","CycleLiquid","liquid","additionalMsg","duty_cycle","MediaFlush","isAlt","altMedia","AddFinalVolumeOfMedia","VerticalLinearStepper","activeStep","setActiveStep","steps","handleNext","prevActiveStep","handleBack","Stepper","Step","StepLabel","StepContent","getStepContent","Paper","square","elevation","StartStirringButton","StartODReading","StartSensors","direction","alignItems","fontScale","StartGrowthRate","StartCalculations","setExperiment","instructions","halfTextField","ExperimentSummaryForm","formError","setFormError","expName","setExpName","setTimestamp","setDescription","required","InputLabelProps","shrink","rowsMax","placeholder","multiline","fullWidth","publishExpNameToMQTT","StartNewExperimentContainer","skipped","setSkipped","content","optional","isStepOptional","isStepSkipped","stepProps","labelProps","completed","prevSkipped","newSkipped","scrollTo","StartNewExperiment","EditableCodeDiv","onSelectionChange","filename","getConfig","getCodeFlaskRef","codeFlask","onTextChange","code","snackbarMsg","availableConfigs","saveCurrentCode","getListOfConfigFiles","letterSpacing","editorRef","language","EditConfigContainer","EditConfig","createMuiTheme","palette","background","main","App","setConfig","CssBaseline","ExperimentOverview","Boolean","hostname","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.5934f945.chunk.js","sourcesContent":["import React from \"react\";\nimport { Client } from \"paho-mqtt\";\nimport { Alert, AlertTitle } from '@material-ui/lab';\n\nimport Snackbar from '@material-ui/core/Snackbar';\n\nfunction TactileButtonNotification(props) {\n  var [unit, setUnit] = React.useState(\"\")\n  var [renamedUnit, setRenamedUnit] = React.useState(\"\")\n  var [open, setOpen] = React.useState(false)\n\n  React.useEffect(() => {\n    if (!props.config['network.topology']){\n      return\n    }\n\n    const onMessageArrived = (msg) => {\n      if (msg.payloadString === \"1\"){\n        var unit = msg.topic.split(\"/\")[1]\n        setUnit(unit)\n        try {\n          setRenamedUnit(props.config['ui.overview.rename'][unit])\n        }\n        catch {}\n        setOpen(true)\n\n      }\n      else {\n        setOpen(false)\n      }\n    }\n\n    const onSuccess = () => {\n      client.subscribe(\n      [\n        \"pioreactor\",\n        \"+\",\n        \"$experiment\",\n        \"monitor\",\n        \"button_down\"\n      ].join(\"/\"),\n      { qos: 1 }\n      )\n    }\n\n    var client = null\n    if (props.config.remote) {\n      client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_TactileButtonNotification\" + Math.random()\n      )}\n    else {\n      client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui_TactileButtonNotification\" + Math.random()\n      );\n    }\n    client.connect({onSuccess: onSuccess, timeout: 180});\n    client.onMessageArrived = onMessageArrived;\n\n  },[props.config])\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={null}\n      onClose={() => {}}\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      key={\"button-tactile-snackbar\"}\n      transitionDuration={{enter: 10}}\n    >\n    <Alert severity=\"info\" variant=\"filled\" icon={false}>\n      <AlertTitle style={{fontSize: 25}}>{unit + (renamedUnit ? \" / \" + renamedUnit : \"\")}</AlertTitle>\n      Holding <b>{unit}</b>'s button down\n    </Alert>\n    </Snackbar>\n)}\n\nexport default TactileButtonNotification;\n","import React from 'react'\n\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n\nfunction PioreactorIcon(props) {\n  const colors = {\n    primary: \"#5331CA\",\n    disabled: \"rgba(0, 0, 0, 0.38)\",\n    black: \"rgba(0, 0, 0, 0.87)\"\n  }\n  return (\n    <SvgIcon {...props}>\n        <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill={props.fillColor || \"none\"} fillRule=\"evenodd\">\n            <g id=\"Experiment-Page-1\" transform=\"translate(-728.000000, -1502.000000)\" stroke=\"currentColor\" strokeWidth=\"1.8\">\n                <g id=\"pioreactor\" transform=\"translate(729.000000, 1503.000000)\">\n                    <path d=\"M1.4,18.9 L1.4,14.7 L0,14.7 L0,11.2 L2.799,11.2 L2.8,0 L14,0 L13.999,11.2 L16.8,11.2 L16.8,14.7 L15.399,14.7 L15.4,18.9 L1.4,18.9 Z\" id=\"Combined-Shape\"></path>\n                    <circle id=\"Oval\" cx=\"8.4\" cy=\"13.3\" r=\"2.1\"></circle>\n                </g>\n            </g>\n        </g>\n    </SvgIcon>\n  );\n}\n\nexport default PioreactorIcon;\n","import React from 'react';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport IconButton from '@material-ui/core/IconButton';\nimport EditIcon from '@material-ui/icons/Edit';\nimport SaveAltIcon from '@material-ui/icons/SaveAlt';\nimport DashboardIcon from '@material-ui/icons/Dashboard';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport PioreactorIcon from './PioreactorIcon';\n\nexport default function SideDrawer() {\n  const [isOpen, setIsOpen] = React.useState(false)\n\n  function isSelected(path) {\n    return (window.location.pathname === path)\n  }\n\n\n\n  const toggleDrawer = (open) => (event) => {\n    if (event && event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n      return;\n    }\n    setIsOpen(open);\n  };\n\n  const list = () => (\n    <div\n      role=\"presentation\"\n      onClick={toggleDrawer(false)}\n      onKeyDown={toggleDrawer(false)}\n    >\n      <img alt=\"pioreactor logo\" src=\"grey_color.png\" width=\"40%\" style={{marginLeft: \"70px\", marginTop: \"5px\"}}/>\n      <List>\n\n        <ListItem href=\"/\" component=\"a\" button key={\"overview\"} selected={isSelected(\"/\") || isSelected(\"/overview\")}>\n          <ListItemIcon><DashboardIcon color={(isSelected(\"/\") || isSelected(\"/overview\")) ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primary={\"Experiment Overview\"} />\n        </ListItem>\n        <ListItem button href=\"/pioreactors\"  component=\"a\" key={\"pioreactors\"} selected={isSelected(\"/pioreactors\")}>\n          <ListItemIcon> <PioreactorIcon color={isSelected(\"/pioreactors\") ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primary={\"Pioreactors\"} />\n        </ListItem>\n\n\n      </List>\n      <Divider />\n      <List>\n        <ListItem button href=\"/edit-config\"  component=\"a\" key={\"edit_config\"} selected={isSelected(\"/edit-config\")}>\n          <ListItemIcon> <EditIcon color={isSelected(\"/edit-config\") ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primary={\"Edit config.ini\"} />\n        </ListItem>\n        <ListItem href=\"/download-data\" component=\"a\" button key={\"download_data\"} selected={isSelected(\"/download-data\")}>\n          <ListItemIcon><SaveAltIcon color={isSelected(\"/download-data\") ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primary={\"Download experiment data\"} />\n        </ListItem>\n\n      </List>\n      <Divider />\n      <List>\n        <ListItem href=\"https://github.com/Pioreactor/pioreactor/wiki\" component=\"a\" button key=\"help\">\n          <ListItemIcon><HelpOutlineIcon/> </ListItemIcon>\n          <ListItemText primary={\"Documentation and help\"} />\n        </ListItem>\n      </List>\n    </div>\n  );\n\n  return (\n      <React.Fragment key={\"leftDrawer\"}>\n        <IconButton\n          color=\"inherit\"\n          aria-label=\"open drawer\"\n          edge=\"start\"\n          onClick={toggleDrawer(true)}\n        >\n          <MenuIcon />\n        </IconButton>\n\n        <Drawer\n          anchor={\"left\"}\n          open={isOpen}\n          onClose={toggleDrawer(false)}\n          onOpen={toggleDrawer(true)}\n        >\n          {list()}\n        </Drawer>\n      </React.Fragment>\n  );\n}\n","import React from 'react'\nimport {AppBar, Toolbar, Typography, Link, Button} from '@material-ui/core';\nimport {makeStyles} from '@material-ui/styles';\nimport SideDrawer from './Drawer'\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\n\nconst Header = () => {\n    const classes = useStyles();\n    return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar variant=\"dense\">\n          <SideDrawer />\n          <Typography variant=\"h6\" className={classes.title}>\n            <Link color=\"inherit\" underline=\"none\" href=\"/\" className={classes.title}> <img alt=\"pioreactor logo\" src=\"white_colour.png\" style={{width: \"120px\", height: \"29px\"}}/> </Link>\n          </Typography>\n          <Link color=\"inherit\" underline=\"none\" href=\"https://github.com/Pioreactor/pioreactor/wiki\" target=\"_blank\" rel=\"noopener\">\n            <Button color=\"inherit\" style={{textTransform: \"none\"}}>Help <HelpOutlineIcon style={{ fontSize: 18, verticalAlign: \"middle\", marginLeft: 5 }}/></Button>\n          </Link>\n        </Toolbar>\n      </AppBar>\n    </div>\n    )\n}\n\nexport default Header;\n","import React from 'react'\n\nimport clsx from 'clsx';\nimport {Client} from 'paho-mqtt';\nimport moment from 'moment';\n\n\nimport {withStyles} from '@material-ui/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nconst useStyles = theme => ({\n  tightCell: {\n    padding: \"8px 2px 6px 4px\",\n    fontSize: 13,\n  },\n  smallText: {\n    fontSize: 12,\n  },\n  headerCell: {\n    backgroundColor: \"white\",\n    padding: \"8px 6px 6px 6px\",\n  },\n  tightRight: {\n    textAlign: \"right\"\n  },\n  errorLog: {\n    backgroundColor: \"#ff7961\"\n  },\n  warningLog: {\n    backgroundColor: \"#FFEA8A\"\n  }\n});\n\nclass LogTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {listOfLogs: []};\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n  }\n\n  async getData() {\n    await fetch(\"./data/all_pioreactor.log.json\")\n      .then(response => {\n        return response.json();\n      })\n      .then(data => {\n        this.setState({listOfLogs: data});\n      });\n  }\n\n  componentDidMount() {\n    this.getData()\n    if (this.props.config.remote) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui_LogTable\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui_LogTable\" + Math.random()\n      );\n    }\n    this.client.connect({timeout: 180, 'onSuccess': this.onConnect});\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  onConnect() {\n      this.client.subscribe([\"pioreactor\", \"+\", \"+\", \"log\"].join(\"/\"))\n  }\n\n  onMessageArrived(message) {\n    if (this.state.listOfLogs.length > 50){\n      this.state.listOfLogs.pop()\n    }\n    const unit = message.topic.split(\"/\")[1]\n    const payload = message.payloadString\n    this.state.listOfLogs.unshift(\n      {timestamp: moment().format(\"x\"), unit: unit, message: payload, is_error: payload.includes(\"Error\"), is_warning: payload.includes(\"Warning\")}\n    )\n    this.setState({\n      listOfLogs: this.state.listOfLogs\n    });\n  }\n\n  breakString(string){\n    if (string.length > 5){\n      return string.slice(0, 4) + \"...\"\n    }\n    return string\n  }\n\n  renameUnit(name){\n    if (!this.props.config['ui.overview.rename']){\n      return name\n    }\n    return (this.props.config['ui.overview.rename'][name]) || name\n  }\n\n  render(){\n    const { classes } = this.props;\n    return (\n      <Card>\n        <CardContent>\n          <Typography variant=\"h6\" component=\"h2\">\n            <Box fontWeight=\"fontWeightRegular\">\n              Event Logs\n            </Box>\n          </Typography>\n          <TableContainer style={{ height: \"700px\", width: \"100%\", overflowY: \"scroll\"}}>\n            <Table stickyHeader size=\"small\" aria-label=\"log table\">\n               <TableHead>\n                <TableRow>\n                  <TableCell className={clsx(classes.headerCell)}>Timestamp</TableCell>\n                  <TableCell className={clsx(classes.headerCell)}>Message</TableCell>\n                  <TableCell className={clsx(classes.headerCell)}>Pioreactor</TableCell>\n                </TableRow>\n              </TableHead>\n\n              <TableBody>\n                {this.state.listOfLogs.map((log, i) => (\n                  <TableRow key={i}>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.errorLog]: log.is_error, [classes.warningLog]: log.is_warning})}> {moment(log.timestamp, 'x').format('HH:mm:ss')} </TableCell>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.errorLog]: log.is_error, [classes.warningLog]: log.is_warning})}> {log.message} </TableCell>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.errorLog]: log.is_error, [classes.warningLog]: log.is_warning})}> {this.renameUnit(log.unit)}</TableCell>\n                  </TableRow>\n                  ))\n                }\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </CardContent>\n      </Card>\n  )}\n}\n\n\n\nexport default withStyles(useStyles)(LogTable);\n","import React from 'react'\nimport {makeStyles} from '@material-ui/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport {Typography} from '@material-ui/core';\nimport moment from \"moment\";\nimport Box from '@material-ui/core/Box';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Divider from '@material-ui/core/Divider';\nimport Button from '@material-ui/core/Button';\nimport ContentEditable from 'react-contenteditable'\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\nimport TimelapseIcon from '@material-ui/icons/Timelapse';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport AddIcon from '@material-ui/icons/Add';\n\nconst useStyles = makeStyles({\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n});\n\n\n\nclass EditableDescription extends React.Component {\n  constructor(props) {\n    super(props)\n    this.contentEditable = React.createRef();\n    this.state = {desc: \"\", openSnackBar: false, originalDesc: \"\"};\n  };\n\n  componentDidUpdate(prevProps) {\n    if (this.props.description !== prevProps.description) {\n      this.setState({desc: `${this.props.description}`, originalDesc: `${this.props.description}`})\n    }\n  }\n\n  handleChange = evt => {\n    this.setState({desc: evt.target.value});\n  };\n\n  onBlur = evt => {\n    if (this.state.desc !== this.state.originalDesc) {\n      this.setState({originalDesc: this.state.desc})\n      return fetch('update_experiment_desc', {\n          method: \"POST\",\n          body: JSON.stringify({experiment : this.props.experiment, description: this.state.desc}),\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        }).then(res => {\n          if (res.status === 200){\n            this.setState({openSnackBar: true});\n          }\n        })\n    }\n  };\n\n  handleSnackbarClose = (e, reason) => {\n    if (reason !== \"clickaway\"){\n      this.setState({openSnackBar: false});\n    }\n  };\n\n  render = () => {\n    return (\n      <div style={{\"padding\": \"0px 5px 0px 5px\"}}>\n        <Box fontWeight=\"fontWeightBold\">\n          Description:\n        </Box>\n        <ContentEditable\n            innerRef={this.contentEditable}\n            html={this.state.desc} // innerHTML of the editable div\n            disabled={false}       // use true to disable editing\n            onChange={this.handleChange} // handle innerHTML change\n            onBlur={this.onBlur}\n            tagName=\"p\"\n            style={{\"padding\": \"3px 3px 3px 2px\"}}\n          />\n          <Snackbar\n            anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n            open={this.state.openSnackBar}\n            onClose={this.handleSnackbarClose}\n            message={\"Updated description\"}\n            autoHideDuration={2500}\n            key={\"snackbarEditDesc\"}\n          />\n      </div>\n    )\n  };\n};\n\n\nfunction ExperimentSummary(props){\n  const classes = useStyles();\n  const experiment = props.experimentMetadata.experiment || \"\"\n  const startedAt = props.experimentMetadata.timestamp || moment()\n  const desc = props.experimentMetadata.description || \"\"\n\n  return(\n    <React.Fragment>\n      <div>\n        <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\"}}>\n          <Typography variant=\"h5\" component=\"h1\">\n            <Box fontWeight=\"fontWeightBold\">\n              {experiment}\n            </Box>\n          </Typography>\n          <div >\n            <Button href=\"/download-data\" style={{textTransform: 'none', marginRight: \"0px\", float: \"right\"}} color=\"primary\">\n              <GetAppIcon className={classes.textIcon}/> Download experiment data\n            </Button>\n            <Button href=\"/start-new-experiment\" style={{textTransform: 'none', float: \"right\", marginRight: \"10px\"}} color=\"primary\">\n              <AddIcon className={classes.textIcon}/> New experiment\n            </Button>\n          </div>\n        </div>\n\n        <Divider/>\n        <Typography variant=\"subtitle2\">\n          <Box fontWeight=\"fontWeightBold\" style={{margin: \"10px 2px 10px 2px\", display:\"inline-block\"}}>\n            <CalendarTodayIcon style={{ fontSize: 12, verticalAlign: \"middle\" }}/> Experiment started:\n          </Box>\n          <Box fontWeight=\"fontWeightRegular\" style={{marginRight: \"20px\", display:\"inline-block\"}}>\n            <span title={moment(startedAt).format(\"YYYY-MM-DD HH:mm:ss\")}>{moment(startedAt).format(\"dddd, MMMM D YYYY\")}</span>\n          </Box>\n          <Box fontWeight=\"fontWeightBold\" style={{display:\"inline-block\", margin: \"10px 2px 10px 0px\"}}>\n            <TimelapseIcon style={{ fontSize: 12, verticalAlign: \"middle\"  }}/>Time elapsed:\n          </Box>\n          <Box fontWeight=\"fontWeightRegular\" style={{display:\"inline-block\"}}>\n           {(moment().diff(moment(startedAt), 'H'))}h\n          </Box>\n        </Typography>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <EditableDescription experiment={experiment} description={desc} />\n        </CardContent>\n      </Card>\n    </React.Fragment>\n  )\n}\n\n\nexport default ExperimentSummary;\n","import React from \"react\";\nimport { Client } from \"paho-mqtt\";\nimport {\n  VictoryChart,\n  VictoryLabel,\n  VictoryAxis,\n  VictoryTheme,\n  VictoryLine,\n  VictoryLegend,\n  createContainer,\n  VictoryTooltip,\n  VictoryVoronoiContainer\n} from \"victory\";\nimport moment from \"moment\";\nimport Card from \"@material-ui/core/Card\";\n\nconst colors = {\n  \"pioreactor1\": \"#9C6ADE\",\n  \"pioreactor1-A\": \"#9C6ADE\",\n  \"pioreactor1-D\": \"#E3D0FF\",\n  \"pioreactor1-C\": \"#50248F\",\n  \"pioreactor1-B\": \"#230051\",\n\n  \"pioreactor2\": \"#47C1BF\",\n  \"pioreactor2-A\": \"#47C1BF\",\n  \"pioreactor2-D\": \"#B7ECEC\",\n  \"pioreactor2-C\": \"#00848E\",\n  \"pioreactor2-B\": \"#003135\",\n\n  \"pioreactor3\": \"#F49342\",\n  \"pioreactor3-A\": \"#F49342\",\n  \"pioreactor3-D\": \"#FFC58B\",\n  \"pioreactor3-C\": \"#C05717\",\n  \"pioreactor3-B\": \"#4A1504\",\n\n  \"pioreactor4\": \"#50B83C\",\n  \"pioreactor4-A\": \"#50B83C\",\n  \"pioreactor4-B\": \"#173630\",\n  \"pioreactor4-C\": \"#108043\",\n  \"pioreactor4-D\": \"#BBE5B3\",\n\n};\n\nfunction linspace(startValue, stopValue, cardinality) {\n  var arr = [];\n  var step = (stopValue - startValue) / (cardinality - 1);\n  for (var i = 0; i < cardinality; i++) {\n    arr.push(startValue + step * i);\n  }\n  return arr;\n}\n\nclass Chart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      seriesMap: {},\n      hiddenSeries: new Set(),\n      names: [],\n      legendEvents: [],\n    };\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n    this.selectLegendData = this.selectLegendData.bind(this);\n    this.selectVictoryLines = this.selectVictoryLines.bind(this);\n\n  }\n\n  onConnect() {\n    this.client.subscribe(\n      [\"pioreactor\", \"+\", this.props.experiment, this.props.topic].join(\"/\")\n    );\n  }\n\n  componentDidMount() {\n    this.getData();\n\n    if (this.props.config.remote) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui_Chart\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui_Chart\" + Math.random()\n      );\n    }\n\n\n    this.client.connect({ onSuccess: this.onConnect });\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  async getData() {\n    await fetch(this.props.dataFile)\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        let initialSeriesMap = {};\n        for (const [i, v] of data[\"series\"].entries()) {\n          if (data[\"data\"][i].length > 0) {\n            initialSeriesMap[v] = {\n              data: (data[\"data\"][i]).filter(this.filterDataPoints(data[\"data\"][i].length)).map(item => ({y: item.y, x: moment(item.x, 'x')})),\n              name: v,\n              color: colors[v],\n            };\n          }\n        }\n        let names = Object.keys(initialSeriesMap);\n        this.setState({\n          seriesMap: initialSeriesMap,\n          legendEvents: this.createLegendEvents(names),\n          names: names,\n        });\n      });\n  }\n\n  createLegendEvents(names) {\n    return names.map((name, idx) => {\n      return {\n        childName: [\"legend\"],\n        target: \"data\",\n        eventKey: String(idx),\n        eventHandlers: {\n          onClick: () => {\n            return [\n              {\n                childName: [\"line-\" + name],\n                target: \"data\",\n                mutation: () => { //this is dumb! I shouldn't mutate this way!\n                  if (!this.state.hiddenSeries.delete(name)) {\n                    // Was not already hidden => add to set\n                    this.state.hiddenSeries.add(name);\n                  }\n                  this.setState({\n                    hiddenSeries: new Set(this.state.hiddenSeries),\n                  });\n                  return null;\n                },\n              },\n            ];\n          },\n        },\n      };\n    });\n  }\n\n  onMessageArrived(message) {\n    if (message.retained){\n      return\n    }\n    const currentTime = moment()\n\n    var key = this.props.isODReading\n      ? message.topic.split(\"/\")[1] + \"-\" + message.topic.split(\"/\")[5]\n      : message.topic.split(\"/\")[1];\n\n    try {\n      if (!(key in this.state.seriesMap)){\n        const newSeriesMap = {...this.state.seriesMap, [key]:  {\n          data: [{x: currentTime, y: parseFloat(message.payloadString)}],\n          name: key,\n          color: colors[key]\n        }}\n\n        this.setState({ seriesMap: newSeriesMap })\n        this.setState({\n          names: [...this.state.names, key]\n        })\n      } else {\n        // .push seems like bad state management, and maybe a hit to performance...\n        this.state.seriesMap[key].data.push({\n          x: currentTime,\n          y: parseFloat(message.payloadString),\n        });\n        this.setState({ seriesMap: this.state.seriesMap })\n      }\n    }\n    catch (error) {\n      console.log(error)\n    }\n    return;\n  }\n\n  breakString(string){\n    if (string.length > 7){\n      return string.slice(0, 5) + \"...\" + string.slice(string.length-2, string.length)\n    }\n    return string\n  }\n\n  renameAndFormatSeries(name){\n    if (!this.props.config['ui.overview.rename']){\n      return name\n    }\n\n    if (name.match(/(.*)-([ABCD])/g)){\n      const results = name.match(/(.*)-([ABCD])/);\n      const index = results[1];\n      const sensor = results[2];\n      return this.breakString(this.props.config['ui.overview.rename'][index] || index) + sensor\n    }\n    else {\n      return this.breakString(this.props.config['ui.overview.rename'][name] || name)\n    }\n  }\n\n\n  filterDataPoints(totalLength){\n    return function(value, index){\n      if (totalLength < 500){\n        return true\n      }\n      if ((index === 0) || (index === (totalLength - 1))){\n        return true\n      }\n      else if (index % Math.round(totalLength/500) === 0){\n        return true\n      } else {\n        return false\n      }\n    }\n  }\n\n  createToolTip = (d) => {\n      return `${d.datum.x.format(\"MMM DD HH:mm\")}\n${this.renameAndFormatSeries(d.datum.childName)}: ${Math.round(d.datum.y * 1000) / 1000}`\n  }\n\n\n  selectLegendData(name){\n    if (!this.state.seriesMap) {\n      return {}\n    }\n    const line = this.state.seriesMap[name];\n    const item = {\n      name: this.renameAndFormatSeries(line.name),\n      symbol: { fill: line.color },\n    };\n    if (this.state.hiddenSeries.has(name)) {\n      return { ...item, symbol: { fill: \"white\" } };\n    }\n    return item;\n  }\n\n  selectVictoryLines(name) {\n    if (this.state.hiddenSeries.has(name)) {\n      return undefined;\n    }\n    return (\n      <VictoryLine\n        interpolation={this.props.interpolation}\n        key={\"line-\" + name + this.props.title}\n        name={name}\n        style={{\n          labels: {fill: this.state.seriesMap[name].color},\n          data: {\n            stroke: this.state.seriesMap[name].color,\n            strokeWidth: 2,\n          },\n          parent: { border: \"1px solid #ccc\" },\n        }}\n        data={this.state.seriesMap[name].data}\n        x=\"x\"\n        y=\"y\"\n      />\n    );\n  }\n\n  render() {\n    const VictoryVoronoiContainer = createContainer(\"voronoi\");\n    return (\n      <Card style={{ maxHeight: \"100%\"}}>\n        <VictoryChart\n          title={this.props.title}\n          domainPadding={10}\n          padding={{ left: 70, right: 50, bottom: 80, top: 50 }}\n          events={this.state.legendEvents}\n          responsive={true}\n          width={600}\n          height={315}\n          scale={{x: 'time'}}\n          theme={VictoryTheme.material}\n          containerComponent={\n            <VictoryVoronoiContainer\n              voronoiBlacklist={['parent']}\n              labels={this.createToolTip}\n              labelComponent={\n                <VictoryTooltip\n                  cornerRadius={0}\n                  flyoutStyle={{\n                    fill: \"white\",\n                    stroke: \"#90a4ae\",\n                    strokeWidth: 1.5,\n                  }}\n                />\n              }\n            />\n          }\n        >\n          <VictoryLabel\n            text={this.props.title}\n            x={300}\n            y={30}\n            textAnchor=\"middle\"\n            style={{\n              fontSize: 15,\n              fontFamily: \"inherit\",\n            }}\n          />\n          <VictoryAxis\n            style={{\n              tickLabels: {\n                fontSize: 13,\n                padding: 5,\n                fontFamily: \"inherit\",\n              },\n            }}\n            offsetY={80}\n            orientation=\"bottom\"\n          />\n          <VictoryAxis\n            crossAxis={false}\n            dependentAxis\n            domain={this.props.domain}\n            label={this.props.yAxisLabel}\n            axisLabelComponent={\n              <VictoryLabel\n                dy={-40}\n                style={{\n                  fontSize: 15,\n                  padding: 10,\n                  fontFamily: \"inherit\",\n                }}\n              />\n            }\n            style={{\n              tickLabels: {\n                fontSize: 13,\n                padding: 5,\n                fontFamily: \"inherit\",\n              },\n            }}\n          />\n          <VictoryLegend\n            x={60}\n            y={267}\n            symbolSpacer={10}\n            itemsPerRow={6}\n            name={\"legend\"}\n            borderPadding={{ right: 8 }}\n            orientation=\"horizontal\"\n            cursor={\"pointer\"}\n            gutter={15}\n            style={{\n              labels: { fontSize: 12 },\n              data: { stroke: \"#485157\", strokeWidth: 1, size: 6 },\n            }}\n            data={this.state.names.map(this.selectLegendData)}\n          />\n          {Object.keys(this.state.seriesMap).map(this.selectVictoryLines)}\n        </VictoryChart>\n      </Card>\n    );\n  }\n}\n\nexport default Chart;\n","import React from 'react'\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport {Client} from 'paho-mqtt';\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport {withStyles} from '@material-ui/styles';\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nimport PioreactorIcon from \"./PioreactorIcon\"\n\n\n\nconst useStyles = theme => ({\n  tightCell: {\n    padding: \"8px 2px 6px 4px\",\n    fontSize: 13,\n  },\n  smallText: {\n    fontSize: 12,\n  },\n  headerCell: {\n    backgroundColor: \"white\",\n    padding: \"8px 6px 6px 6px\",\n  },\n  tightRight: {\n    textAlign: \"right\"\n  },\n});\n\n\n\nclass MediaCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        mediaThroughputPerUnit: {},\n        altMediaThroughputPerUnit: {},\n        mediaThroughput: 0,\n        altMediaThroughput: 0,\n        rates: {all: {mediaRate: 0, altMediaRate: 0}},\n        activeUnits: []\n      };\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n  }\n\n  async getRecentRates() {\n    if (!this.props.experiment){\n      return\n    }\n\n     await fetch(\"/recent_media_rates/\" + this.props.experiment)\n    .then((response) => {\n      return response.json();\n    })\n    .then((data) => {\n      this.setState(prevState => ({...prevState, rates: data}))\n    });\n    return\n  }\n\n  componentDidUpdate(prevProps) {\n     if (prevProps.experiment !== this.props.experiment) {\n      this.getRecentRates()\n     }\n  }\n\n  componentDidMount() {\n    if (this.props.config.remote) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui_MediaCard\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui_MediaCard\" + Math.random()\n      );\n    }\n\n    this.client.connect({timeout: 180, 'onSuccess': this.onConnect});\n    this.client.onMessageArrived = this.onMessageArrived;\n    this.setState({activeUnits: Object.entries(this.props.config['inventory']).filter((v) => v[1] === \"1\").map((v) => v[0])})\n    this.getRecentRates()\n  }\n\n\n  onConnect() {\n      this.client.subscribe([\"pioreactor\", \"+\", this.props.experiment, \"throughput_calculating\", \"alt_media_throughput\"].join(\"/\"))\n      this.client.subscribe([\"pioreactor\", \"+\", this.props.experiment, \"throughput_calculating\", \"media_throughput\"].join(\"/\"))\n  }\n\n  addOrUpdate(hash, object, value) {\n      if (Object.hasOwnProperty(hash)){\n        object[hash] = value + object[hash]\n      }\n      else{\n        object[hash] = value\n      }\n      return object\n  }\n\n  onMessageArrived(message) {\n    const topic = message.destinationName\n    const topicParts = topic.split(\"/\")\n    const payload = parseFloat(message.payloadString)\n    const unit = topicParts[1]\n    const objectRef = (topicParts.slice(-1)[0] === \"alt_media_throughput\")  ? \"altMediaThroughputPerUnit\"  : \"mediaThroughputPerUnit\"\n    const totalRef = (topicParts.slice(-1)[0] === \"alt_media_throughput\")  ? \"altMediaThroughput\"  : \"mediaThroughput\"\n\n    this.setState({\n      [objectRef]: this.addOrUpdate(unit, this.state[objectRef], payload)\n    });\n\n    var total = Object.values(this.state[objectRef]).reduce((a, b) => a + b, 0)\n\n    this.setState({\n      [totalRef]: total\n    })\n\n  }\n  render(){\n    return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h6\" component=\"h2\">\n          <Box fontWeight=\"fontWeightRegular\">\n            Dosing\n          </Box>\n        </Typography>\n       <TableContainer style={{ width: \"100%\"}}>\n          <Table size=\"small\" aria-label=\"media throughput\">\n            <TableHead>\n              <TableRow>\n                <TableCell style={{padding: \"6px 0px\"}}></TableCell>\n                <TableCell style={{padding: \"6px 0px\"}} align=\"right\">Media</TableCell>\n                <TableCell style={{padding: \"6px 0px\"}} align=\"right\">Alt. Media</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              <TableRow key=\"all\">\n                <TableCell style={{padding: \"6px 0px\"}} component=\"th\" scope=\"row\">\n                  All Pioreactors\n                </TableCell>\n                <TableCell align=\"right\" style={{ fontSize: 13, padding: \"6px 0px\"}}>{this.state.mediaThroughput.toFixed(1)}mL (~{this.state.rates.all.mediaRate.toFixed(1)}mL/h)</TableCell>\n                <TableCell align=\"right\" style={{ fontSize: 13, padding: \"6px 0px\"}}>{this.state.altMediaThroughput.toFixed(1)}mL (~{this.state.rates.all.altMediaRate.toFixed(1)}mL/h)</TableCell>\n              </TableRow>\n\n              {this.state.activeUnits.map((unit) => (\n                <TableRow key={unit}>\n                  <TableCell style={{padding: \"6px 0px\"}} component=\"th\" scope=\"row\">\n                      <PioreactorIcon style={{ fontSize: 13, verticalAlign: \"middle\" }} color=\"black\"/> <span className={\"underlineSpan\"} title={unit}>{(this.props.config['ui.overview.rename'] && this.props.config['ui.overview.rename'][unit]) ? this.props.config['ui.overview.rename'][unit] : unit}</span>\n                  </TableCell>\n                  <TableCell align=\"right\" style={{ fontSize: 13, padding: \"6px 0px\"}}>{(this.state.mediaThroughputPerUnit[unit] || 0).toFixed(1)}mL (~{this.state.rates[unit] ? this.state.rates[unit].mediaRate.toFixed(1) : \"0.0\"}mL/h)</TableCell>\n                  <TableCell align=\"right\" style={{ fontSize: 13, padding: \"6px 0px\"}}>{(this.state.altMediaThroughputPerUnit[unit] || 0).toFixed(1)}mL (~{this.state.rates[unit] ? this.state.rates[unit].altMediaRate.toFixed(1): \"0.0\"}mL/h)</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </CardContent>\n    </Card>\n  )}\n}\n\nexport default  withStyles(useStyles)(MediaCard);\n","import React from \"react\";\nimport { Client, Message } from \"paho-mqtt\";\nimport ClearIcon from '@material-ui/icons/Clear';\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nconst useStyles = makeStyles((theme) => ({\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n}))\n\n\nfunction ClearChartButton(props){\n  const classes = useStyles();\n\n\n  function onClick() {\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_ClearChartButton\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui_ClearChartButton\" + Math.random()\n      );\n    }\n    client.connect({timeout: 180, onSuccess: () => {\n      for (var jobName of ['od_raw', 'od_filtered', 'growth_rate', 'alt_media_fraction']) {\n        var message = new Message(\"\");\n\n        message.destinationName = [\n          \"pioreactor\",\n          props.config['network.topology']['leader_hostname'],\n          \"$experiment\",\n          `${jobName}_time_series_aggregating`,\n          \"aggregated_time_series\",\n          \"set\",\n        ].join(\"/\");\n\n        client.publish(message);\n      }\n\n      window.location.reload();\n      return false\n    }});\n  }\n\n  return (\n    <Button color=\"primary\" style={{textTransform: \"none\"}} onClick={onClick}><ClearIcon className={classes.textIcon}/> Clear chart data </Button>\n)}\n\n\nexport default ClearChartButton;\n","import React from \"react\";\nimport { Client, Message } from \"paho-mqtt\";\nimport ClearIcon from '@material-ui/icons/Clear';\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nconst useStyles = makeStyles((theme) => ({\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n}))\n\n\nfunction ClearLogButton(props){\n  const classes = useStyles();\n\n\n  function onClick() {\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_ClearLogButton\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui_ClearLogButton\" + Math.random()\n      );\n    }\n    client.connect({timeout: 180, onSuccess: () => {\n      var message = new Message(\"\");\n      message.destinationName = [\n        \"pioreactor\",\n        props.config['network.topology']['leader_hostname'],\n        \"$experiment\",\n        \"log_aggregating\",\n        \"aggregated_log_table\",\n        \"set\",\n      ].join(\"/\");\n      client.publish(message);\n      window.location.reload();\n      return false\n    }});\n  }\n\n  return (\n    <Button color=\"primary\" style={{textTransform: \"none\"}} onClick={onClick}> <ClearIcon className={classes.textIcon}/>  Clear log table </Button>\n)}\n\n\nexport default ClearLogButton;\n","import React from \"react\";\n\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport Header from \"./components/Header\";\nimport LogTable from \"./components/LogTable\";\nimport ExperimentSummary from \"./components/ExperimentSummary\";\nimport Chart from \"./components/Chart\";\nimport MediaCard from \"./components/MediaCard\";\nimport ClearChartButton from \"./components/ClearChartButton\";\nimport ClearLogButton from \"./components/ClearLogButton\";\nimport PioreactorIcon from './components/PioreactorIcon';\nimport TactileButtonNotification from \"./components/TactileButtonNotification\";\n\n\nfunction Overview(props) {\n\n  const [experimentMetadata, setExperimentMetadata] = React.useState({})\n\n  React.useEffect(() => {\n    async function getLatestExperiment() {\n         await fetch(\"/get_latest_experiment\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setExperimentMetadata(data)\n        });\n      }\n    getLatestExperiment()\n  }, [])\n\n  return (\n      <React.Fragment>\n        <Grid container spacing={2} justify=\"space-between\">\n          <Grid item xs={12} style={{paddingRight: \"0px\"}}>\n            <Header />\n          </Grid>\n          <Grid item xs={1} md={12}/>\n          <Grid item xs={1} md={12}/>\n\n\n          <Grid item xs={12} md={1}/>\n          <Grid item xs={12} md={10}>\n            <ExperimentSummary experimentMetadata={experimentMetadata}/>\n          </Grid>\n          <Grid item xs={12} md={1}/>\n\n\n          <Grid item xs={12} md={1}/>\n          <Grid item xs={12} md={6} container spacing={2} justify=\"flex-start\" style={{paddingLeft: 0, height: \"100%\"}}>\n\n\n            {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['implied_growth_rate'] === \"1\")) &&\n            <Grid item xs={12}>\n              <Chart\n                config={props.config}\n                dataFile={\"./data/growth_rate_time_series_aggregating.json\"}\n                title=\"Implied growth rate\"\n                topic=\"growth_rate\"\n                yAxisLabel=\"Growth rate, h\"\n                experiment={experimentMetadata.experiment}\n                interpolation=\"stepAfter\"\n              />\n            </Grid>\n            }\n\n            {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['fraction_of_volume_that_is_alternative_media'] === \"1\")) &&\n            <Grid item xs={12}>\n              <Chart\n                config={props.config}\n                domain={[0, 1]}\n                dataFile={\"./data/alt_media_fraction_time_series_aggregating.json\"}\n                interpolation=\"stepAfter\"\n                title=\"Fraction of volume that is alternative media\"\n                topic=\"alt_media_calculating/alt_media_fraction\"\n                yAxisLabel=\"Fraction\"\n                experiment={experimentMetadata.experiment}\n              />\n            </Grid>\n            }\n\n            {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['normalized_optical_density'] === \"1\")) &&\n            <Grid item xs={12}>\n              <Chart\n                config={props.config}\n                isODReading={true}\n                dataFile={\"./data/od_filtered_time_series_aggregating.json\"}\n                title=\"Normalized optical density\"\n                topic=\"od_filtered/+/+\"\n                yAxisLabel=\"Current OD / initial OD\"\n                experiment={experimentMetadata.experiment}\n                interpolation=\"stepAfter\"\n              />\n            </Grid>\n            }\n\n            {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['raw_optical_density'] === \"1\")) &&\n            <Grid item xs={12}>\n              <Chart\n                config={props.config}\n                isODReading={true}\n                dataFile={\"./data/od_raw_time_series_aggregating.json\"}\n                title=\"Raw optical density\"\n                topic=\"od_raw/+/+\"\n                yAxisLabel=\"Voltage\"\n                experiment=\"+\"\n                interpolation=\"stepAfter\"\n              />\n            </Grid>\n           }\n            <Grid item xs={12}> <ClearChartButton config={props.config} experiment={experimentMetadata.experiment}/> </Grid>\n          </Grid>\n\n          <Grid item xs={12} md={4} container spacing={2} justify=\"flex-end\" style={{height: \"100%\"}}>\n\n\n            {( props.config['ui.overview.cards'] && (props.config['ui.overview.cards']['dosings'] === \"1\")) &&\n              <Grid item xs={12} style={{padding: \"10px 0px\"}}>\n                <MediaCard experiment={experimentMetadata.experiment} config={props.config}/>\n                <Button href=\"/pioreactors\" color=\"primary\" style={{textTransform: \"none\", verticalAlign: \"middle\", margin: \"0px 3px\"}}> <PioreactorIcon style={{ fontSize: 17 }} color=\"primary\"/> See all Pioreactor details </Button>\n              </Grid>\n            }\n\n\n            {( props.config['ui.overview.cards'] && (props.config['ui.overview.cards']['event_logs'] === \"1\")) &&\n              <Grid item xs={12} style={{padding: \"10px 0px\"}}>\n                <LogTable config={props.config}/>\n                <ClearLogButton config={props.config} />\n              </Grid>\n            }\n\n\n          </Grid>\n\n          <Grid item xs={1} md={1}/>\n        </Grid>\n        {props.config['ui.overview.rename'] ? <TactileButtonNotification config={props.config}/> : null}\n      </React.Fragment>\n  );\n}\nexport default Overview;\n","import React from \"react\";\nimport moment from \"moment\";\n\nimport Grid from '@material-ui/core/Grid';\nimport Header from \"./components/Header\"\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport {Typography} from '@material-ui/core';\nimport Select from '@material-ui/core/Select';\nimport Box from '@material-ui/core/Box';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Button from \"@material-ui/core/Button\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  formControl: {\n    margin: theme.spacing(3),\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  caption: {\n    marginLeft: \"30px\",\n    maxWidth: \"650px\"\n  }\n}));\n\n\n\nfunction ExperimentSelection(props) {\n  const classes = useStyles();\n\n  const [experiments, setExperiments] = React.useState([])\n\n  React.useEffect(() => {\n    async function getData() {\n         await fetch(\"/get_experiments\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setExperiments(data)\n          props.handleChange(data[0].experiment)\n        });\n      }\n      getData()\n  }, [])\n\n  const handleExperimentSelectionChange = (e) => {\n    props.handleChange(e.target.value)\n  }\n\n  return (\n    <div className={classes.root}>\n      <FormControl component=\"fieldset\" className={classes.formControl}>\n\n      <FormLabel component=\"legend\">Experiment</FormLabel>\n        <Select\n          native\n          value={props.ExperimentSelection}\n          onChange={handleExperimentSelectionChange}\n          inputProps={{\n            name: 'experiment',\n            id: 'experiment',\n          }}\n        >\n          {experiments.map((v) => {\n            return <option value={v.experiment}>{v.experiment +  ` (started ${moment(v.timestamp).format(\"MMMM D, YYYY\")})`}</option>\n            }\n          )}\n        </Select>\n      </FormControl>\n\n    </div>\n  )\n}\n\n\n\nconst CheckboxesGroup = (props) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <FormControl component=\"fieldset\" className={classes.formControl}>\n        <FormLabel component=\"legend\">Datasets</FormLabel>\n        <FormGroup>\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.growth_rates} onChange={props.handleChange} name=\"growth_rates\" />}\n            label=\"Implied growth rate\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            The time series of the calculated (implied) growth rate. Same data as presented in the \"Implied growth rate\" chart in the Experiment Overview.\n          </Typography>\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.dosing_events} onChange={props.handleChange} name=\"dosing_events\" />}\n            label=\"Dosing events log\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            A detailed log table of all dosing events, including the volume exchanged, and the source of the initiator.\n          </Typography>\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.experiments} onChange={props.handleChange} name=\"experiments\" />}\n            label=\"Experiment description\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            The most recent description of the experiment.\n          </Typography>\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.od_readings_raw} onChange={props.handleChange} name=\"od_readings_raw\" />}\n            label=\"Raw optical density\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            The time series of raw voltages provided by the senors, the inputs for growth calculations and normalized optical densities. Same data as presented in the \"Raw optical density\" chart in the Experiment Overview.\n          </Typography>\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.od_readings_filtered} onChange={props.handleChange} name=\"od_readings_filtered\" />}\n            label=\"Normalized optical density\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            The time series of normalized optical densities. Same data as presented in the \"Normalized optical density\" chart in the Experiment Overview.\n          </Typography>\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.logs} onChange={props.handleChange} name=\"logs\" />}\n            label=\"Event logs\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            The append-only collection of logs from all Pioreactors. Same data as displayed in the Log Table in the Expeirment Overview.\n          </Typography>\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.alt_media_fraction} onChange={props.handleChange} name=\"alt_media_fraction\" />}\n            label=\"Alternative media fraction\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            A time series of how much alternative media is in each Pioreactor. Same data as presented in the \"Fraction of volume that is alternative media\" chart in the Experiment Overview.\n          </Typography>\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.dosing_algorithm_settings} onChange={props.handleChange} name=\"dosing_algorithm_settings\" />}\n            label=\"Dosing algorithm change log\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            Whenever a dosing algorithm is updated (new algorithm, new setting, etc.), a new record is produced. You can reconstruct all the dosing algorithm states\n            from this dataset.\n          </Typography>\n        </FormGroup>\n      </FormControl>\n    </div>\n)}\n\n\nfunction DownloadDataFormContainer() {\n  const classes = useStyles();\n  const [isRunning, setIsRunning] = React.useState(false)\n  const [isError, setIsError] = React.useState(false)\n  const [errorMsg, setErrorMsg] = React.useState(\"\")\n  const [state, setState] = React.useState({\n    experimentSelection: \"\",\n    datasetCheckbox: {\n      growth_rates: false,\n      dosing_events: false,\n      experiments: false,\n      od_readings_raw: false,\n      od_readings_filtered: false,\n      logs: false,\n      alt_media_fraction: false,\n      dosing_algorithm_settings: false,\n    }\n  });\n\n  const onSubmit = (event) =>{\n    event.preventDefault()\n\n    if (!Object.values(state['datasetCheckbox']).some((e) => e)) {\n      setIsError(true)\n      setErrorMsg(\"At least one dataset must be selected.\")\n      return\n    }\n\n    setIsRunning(true)\n    fetch('query_datasets',{\n        method: \"POST\",\n        body: JSON.stringify(state),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n    }).then(res => res.json())\n      .then(res => {\n      var link = document.createElement(\"a\");\n      link.setAttribute('download', res['filename']);\n      link.href = \"/static/exports/\" + res['filename'];\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      setIsRunning(false)\n    }).catch(e => {\n      setIsRunning(false)\n      setIsError(true)\n      setErrorMsg(\"Server error occurred. Check logs.\")\n    });\n  }\n\n  const handleCheckboxChange = (event) => {\n    setState(prevState => ({\n      ...prevState,\n      datasetCheckbox: {...state.datasetCheckbox, [event.target.name]: event.target.checked }\n    }));\n  };\n\n  function handleExperimentSelectionChange(value) {\n    setState(prevState => ({\n      ...prevState,\n      experimentSelection: value\n    }));\n  };\n\n  const runningFeedback = isRunning ? <CircularProgress color=\"white\" size={24}/> : \"Download\"\n  const errorFeedbackOrDefault = isError ? errorMsg : \"Querying large tables may take up to a minute or so.\"\n  return (\n    <React.Fragment>\n      <div>\n        <div>\n          <Typography variant=\"h5\" component=\"h1\">\n            <Box fontWeight=\"fontWeightBold\">\n              Download Experiment Data\n            </Box>\n          </Typography>\n        </div>\n\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <form>\n            <Grid container spacing={1}>\n              <Grid item xs={12} md={12}>\n                <ExperimentSelection\n                experimentSelection={state.experimentSelection}\n                handleChange={handleExperimentSelectionChange}\n                />\n              </Grid>\n              <Grid item xs={12} md={12}>\n                <CheckboxesGroup\n                isChecked={state.datasetCheckbox}\n                handleChange={handleCheckboxChange}\n                />\n              </Grid>\n\n              <Grid item xs={0}/>\n              <Grid item xs={12}>\n                <Button\n                  type=\"submit\"\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={onSubmit}\n                  style={{width: \"120px\", marginLeft: 24}}\n                >\n                  {runningFeedback}\n                </Button>\n                <p style={{marginLeft: 24}}>{errorFeedbackOrDefault}</p>\n\n              </Grid>\n              <Grid item xs={12}/>\n            </Grid>\n          </form>\n        </CardContent>\n      </Card>\n  </React.Fragment>\n  )\n}\n\n\nfunction DownloadData() {\n    return (\n        <Grid container spacing={2} >\n          <Grid item xs={12}><Header /></Grid>\n          <Grid item xs={12} />\n          <Grid item xs={12} />\n\n          <Grid item md={2} xs={1}/>\n          <Grid item md={8} xs={12}>\n            <DownloadDataFormContainer/>\n          </Grid>\n          <Grid item md={2} xs={1}/>\n        </Grid>\n    )\n}\n\nexport default DownloadData;\n\n","\nexport function parseINIString(data){\n    var regex = {\n        section: /^\\s*\\[\\s*([^\\]]*)\\s*\\]\\s*$/,\n        param: /^\\s*([^=]+?)\\s*=\\s*(.*?)\\s*$/,\n        comment: /^\\s*;.*$/\n    };\n    var value = {};\n    var lines = data.split(/[\\r\\n]+/);\n    var section = null;\n    lines.forEach(function(line){\n        if(regex.comment.test(line)){\n            return;\n        }else if(regex.param.test(line)){\n            var match = line.match(regex.param);\n            if(section){\n                value[section][match[1]] = match[2];\n            }else{\n                value[match[1]] = match[2];\n            }\n        }else if(regex.section.test(line)){\n            var match = line.match(regex.section);\n            value[match[1]] = {};\n            section = match[1];\n        }else if(line.length === 0 && section){\n            section = null;\n        };\n    });\n    return value;\n}","import React, { useState, useEffect } from \"react\";\n\nimport { Client, Message } from \"paho-mqtt\";\n\nimport { makeStyles } from \"@material-ui/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nconst useStyles = makeStyles((theme) => ({\n  textFieldCompact: {\n    marginTop: theme.spacing(3),\n    marginRight: theme.spacing(2),\n    marginBottom: theme.spacing(0),\n    width: \"30ch\",\n  },\n  formControl: {\n    marginTop: theme.spacing(2)\n  },\n  unitTitle: {\n    fontSize: 17,\n    color: \"rgba(0, 0, 0, 0.87)\",\n  },\n  unitTitleDialog :{\n    fontSize: 20,\n    color: \"rgba(0, 0, 0, 0.87)\",\n  },\n  suptitle: {\n    fontSize: \"13px\",\n    color: \"rgba(0, 0, 0, 0.60)\",\n  },\n}));\n\nfunction SilentForm(props){\n  const classes = useStyles();\n  const defaults = {duration: 60}\n\n  useEffect(() => {\n    props.updateParent(defaults)\n  }, [])\n\n\n  const onSettingsChange = (e) => {\n    props.updateParent({[e.target.id]: e.target.value})\n  }\n\n  return (\n      <TextField\n        size=\"small\"\n        id=\"duration\"\n        label=\"Duration between events\"\n        defaultValue={defaults.duration}\n        InputProps={{\n          endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n        }}\n        variant=\"outlined\"\n        onChange={onSettingsChange}\n        className={classes.textFieldCompact}\n      />\n)}\n\nfunction PIDTurbidostatForm(props){\n  const classes = useStyles();\n  const defaults = {duration: 30, volume: 0.75, target_od: 1.5}\n\n  useEffect(() => {\n    props.updateParent(defaults)\n  }, [])\n\n\n  const onSettingsChange = (e) => {\n    props.updateParent({[e.target.id]: parseFloat(e.target.value)})\n  }\n\n  return (\n      <div>\n        <TextField\n          size=\"small\"\n          id=\"duration\"\n          defaultValue={defaults.duration}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n          label=\"Duration between events\"\n        />\n        <TextField\n          size=\"small\"\n          id=\"volume\"\n          label=\"Max volume\"\n          defaultValue={defaults.volume}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">mL</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n        <TextField\n          size=\"small\"\n          id=\"target_od\"\n          label=\"Target OD\"\n          defaultValue={defaults.target_od}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">AU</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n    </div>\n)}\n\nfunction PIDMorbidostatForm(props){\n  const classes = useStyles();\n  const defaults = {duration: 60, target_growth_rate: 0.1, target_od: 1.5}\n\n  useEffect(() => {\n    props.updateParent(defaults)\n  }, [])\n\n  const onSettingsChange = (e) => {\n    props.updateParent({[e.target.id]: e.target.value})\n  }\n\n  return (\n      <div>\n        <TextField\n          size=\"small\"\n          id=\"duration\"\n          label=\"Duration between events\"\n          defaultValue={defaults.duration}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n        <TextField\n          size=\"small\"\n          id=\"target_od\"\n          label=\"Target OD\"\n          defaultValue={defaults.target_od}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">AU</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n        <TextField\n          size=\"small\"\n          id=\"target_growth_rate\"\n          label=\"Target growth rate\"\n          defaultValue={defaults.target_growth_rate}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">h</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n    </div>\n)}\n\n\n\nfunction ButtonChangeDosingDialog(props) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [algoSettings, setAlgoSettings] = useState({dosing_algorithm: \"silent\"})\n  const [isClicked, setIsClicked] = useState(false)\n  const [client, setClient] = useState(null)\n\n  const algos = [\n    {name: \"Silent\", key: \"silent\"},\n    {name: \"PID Morbidostat\",  key: \"pid_morbidostat\"},\n    {name: \"PID Turbidostat\",  key: \"pid_turbidostat\"},\n    {name: \"Chemostat\", key: \"chemostat\"},\n  ]\n\n  useEffect(() => {\n    // MQTT - client ids should be unique\n    if (!props.config['network.topology']){\n      return\n    }\n\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_ButtonChangeDosingDialog\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui_ButtonChangeDosingDialog\" + Math.random()\n      );\n    }\n\n    client.connect({timeout: 180});\n    setClient(client)\n  },[props.config])\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleAlgoSelectionChange = (e) => {\n    setAlgoSettings({dosing_algorithm: e.target.value})\n  }\n\n  const updateFromChild = (setting) => {\n    setAlgoSettings(prevState => ({...prevState, ...setting}))\n  }\n\n  const switchToForm = () => {\n    switch(algoSettings.dosing_algorithm) {\n      case \"silent\":\n        return <SilentForm updateParent={updateFromChild}/>\n      case \"pid_turbidostat\":\n        return <PIDTurbidostatForm updateParent={updateFromChild}/>\n      case \"pid_morbidostat\":\n        return <PIDMorbidostatForm updateParent={updateFromChild}/>\n      default:\n        //TODO\n        return <div><p>Not implemented</p></div>\n    }\n  }\n\n  const onSubmit = (event) => {\n    event.preventDefault()\n    setIsClicked(true)\n    var message = new Message(JSON.stringify(algoSettings));\n    message.destinationName = [\n      \"pioreactor\",\n      props.unit,\n      props.experiment,\n      \"algorithm_controlling\",\n      \"dosing_algorithm\",\n      \"set\",\n    ].join(\"/\");\n    message.qos = 2;\n    try{\n      client.publish(message);\n    }\n    catch (e){\n      console.log(e)\n    }\n    setOpen(false);\n  }\n  return (\n    <div>\n    <Button\n      style={{marginTop: \"10px\"}}\n      size=\"small\"\n      color=\"primary\"\n      disabled={!props.currentDosingAlgorithm}\n      onClick={handleClickOpen}\n    >\n      Change dosing algorithm\n    </Button>\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\" PaperProps={{style: {height: \"100%\"}}}>\n      <DialogTitle>\n        <Typography className={classes.suptitle}>\n          {props.title || ((props.config['ui.overview.rename'] && props.config['ui.overview.rename'][props.unit]) ? `${props.config['ui.overview.rename'][props.unit]} (${props.unit})` : `${props.unit}`)}\n        </Typography>\n        <Typography className={classes.unitTitleDialog}>\n          Dosing Algorithm\n        </Typography>\n      </DialogTitle>\n      <DialogContent>\n        <Typography variant=\"body2\" component=\"p\" gutterBottom>\n          Dosing algorithms control when and how much media to add to the Pioreactor. The settings below can be changed later. Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/Dosing-Algorithms\">dosing algorithms</a>.\n        </Typography>\n\n        <form>\n          <FormControl component=\"fieldset\" className={classes.formControl}>\n          <FormLabel component=\"legend\">Algorithm</FormLabel>\n            <Select\n              native\n              value={algoSettings.mode}\n              onChange={handleAlgoSelectionChange}\n              style={{maxWidth: \"200px\"}}\n            >\n              {algos.map((v) => {\n                return <option id={v.key} value={v.key} key={\"change-io\" + v.key}>{v.name}</option>\n                }\n              )}\n            </Select>\n            {switchToForm()}\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              color={isClicked ? \"default\" : \"primary\" }\n              onClick={onSubmit}\n              style={{width: \"120px\", marginTop: \"20px\"}}\n            >\n              Submit\n            </Button>\n          </FormControl>\n        </form>\n\n\n      </DialogContent>\n    </Dialog>\n    </div>\n)}\n\n\nexport default ButtonChangeDosingDialog;\n","import React, {useState} from 'react'\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport { makeStyles } from \"@material-ui/styles\";\n\nconst useStyles = makeStyles({\n  actionTextField: {\n    padding: \"0px 10px 0px 0px\",\n  },\n  actionForm: {\n    padding: \"20px 0px 0px 0px\",\n  }\n});\n\n\nconst actionToAct = {\n  \"remove_waste\": \"Removing waste\",\n  \"add_media\": \"Adding media\",\n  \"add_alt_media\": \"Adding alt. media\",\n\n}\n\nexport default function ActionPumpForm(props) {\n  const emptyState = \"\";\n  const [mL, setML] = useState(emptyState);\n  const [duration, setDuration] = useState(emptyState);\n  const classes = useStyles();\n  const [isMLDisabled, setIsMLDisabled] = useState(false);\n  const [isDurationDisabled, setIsDurationDisabled] = useState(false);\n  const [openSnackbar, setOpenSnackbar] = useState(false);\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if (mL !== emptyState || duration !== emptyState) {\n      const params = mL !== \"\" ? { ml: mL, source_of_event: \"UI\"} : { duration: duration, source_of_event: \"UI\"};\n      fetch(\n        \"/run/\" +\n          props.action +\n          \"/\" +\n          props.unit +\n          \"?\" +\n          new URLSearchParams(params)\n      );\n      setOpenSnackbar(true);\n    }\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false );\n  };\n\n  function handleMLChange(e) {\n    setML(e.target.value);\n    setIsDurationDisabled(true);\n    if (e.target.value === emptyState) {\n      setIsDurationDisabled(false);\n    }\n  }\n\n  function handleDurationChange(e) {\n    setDuration(e.target.value);\n    setIsMLDisabled(true);\n    if (e.target.value === emptyState) {\n      setIsMLDisabled(false);\n    }\n  }\n\n  return (\n    <form id={props.action} className={classes.actionForm}>\n      <TextField\n        name=\"mL\"\n        value={mL}\n        size=\"small\"\n        id={props.action + \"_mL\"}\n        label=\"mL\"\n        variant=\"outlined\"\n        disabled={isMLDisabled}\n        onChange={handleMLChange}\n        className={classes.actionTextField}\n      />\n      <TextField\n        name=\"duration\"\n        value={duration}\n        size=\"small\"\n        id={props.action + \"_duration\"}\n        label=\"seconds\"\n        variant=\"outlined\"\n        disabled={isDurationDisabled}\n        onChange={handleDurationChange}\n        className={classes.actionTextField}\n      />\n      <br />\n      <br />\n      <Button\n        type=\"submit\"\n        variant=\"contained\"\n        size=\"small\"\n        color=\"primary\"\n        onClick={onSubmit}\n      >\n        {props.action.replace(/_/g, \" \")}\n      </Button>\n      <Snackbar\n        anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n        open={openSnackbar}\n        onClose={handleSnackbarClose}\n        message={actionToAct[props.action] + (duration !== emptyState ? (\" for \" +  duration + \" seconds.\") : (\" until \" + mL + \"mL.\"))}\n        autoHideDuration={7000}\n        key={\"snackbar\" + props.unit + props.action}\n      />\n    </form>\n  );\n}","import clsx from 'clsx';\nimport { Client, Message } from \"paho-mqtt\";\n\nimport React, {useState, useEffect} from \"react\";\n\nimport Grid from '@material-ui/core/Grid';\nimport Header from \"./components/Header\"\nimport PropTypes from 'prop-types';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport {Typography} from '@material-ui/core';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Box from '@material-ui/core/Box';\nimport Divider from '@material-ui/core/Divider';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Slider from '@material-ui/core/Slider';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport TextField from '@material-ui/core/TextField';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Button from \"@material-ui/core/Button\";\nimport AddIcon from '@material-ui/icons/Add';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport EditIcon from '@material-ui/icons/Edit';\nimport IconButton from '@material-ui/core/IconButton';\nimport FlareIcon from '@material-ui/icons/Flare';\n\nimport {parseINIString} from \"./utilities\"\nimport ButtonChangeDosingDialog from \"./components/ButtonChangeDosingDialog\"\nimport ActionPumpForm from \"./components/ActionPumpForm\"\nimport PioreactorIcon from \"./components/PioreactorIcon\"\nimport TactileButtonNotification from \"./components/TactileButtonNotification\";\n\n\nconst onlineGreen = \"#4caf50\"\nconst offlineGrey = \"grey\"\nconst errorRed = \"#DE3618\"\n\nconst useStyles = makeStyles((theme) => ({\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n  pioreactorCard: {\n    marginTop: \"0px\",\n    marginBottom: \"20px\",\n  },\n  cardContent: {\n    padding: \"10px 20px 20px 20px\"\n  },\n  unitTitle: {\n    fontSize: 20,\n    color: \"rgba(0, 0, 0, 0.87)\",\n    fontWeight: 500,\n  },\n  unitTitleDialog :{\n    fontSize: 20,\n    color: \"rgba(0, 0, 0, 0.87)\",\n  },\n  suptitle: {\n    fontSize: \"13px\",\n    color: \"rgba(0, 0, 0, 0.60)\",\n  },\n  disabledText: {\n    color: \"rgba(0, 0, 0, 0.38)\",\n  },\n  textbox:{\n    width: \"130px\",\n  },\n  textboxLabel:{\n    width: \"100px\",\n  },\n  footnote: {\n    marginBottom: 0,\n    fontSize: 12,\n  },\n  textField: {\n    marginTop: \"15px\",\n    maxWidth: \"180px\",\n  },\n  textFieldWide: {\n    marginTop: \"15px\",\n    maxWidth: \"220px\",\n  },\n  textFieldCompact: {\n    marginTop: theme.spacing(3),\n    marginRight: theme.spacing(2),\n    marginBottom: theme.spacing(0),\n    width: \"30ch\",\n  },\n  slider: {\n    width: \"70%\",\n    margin: \"40px auto 0px auto\",\n  },\n  divider: {\n    marginTop: 15,\n    marginBottom: 10,\n  },\n}));\n\nfunction TabPanel(props) {\n  // move me\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n          <div>{children}</div>\n      )}\n    </div>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\n\nclass UnitSettingDisplay extends React.Component {\n  // this class polls the MQTT broker for state\n  constructor(props) {\n    super(props);\n    this.state = { msg: this.props.default };\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n    this.MQTTConnect();\n  }\n\n  updateParent(data) {\n    try {\n      this.props.passChildData(data);\n    } catch (e) {}\n  }\n\n  MQTTConnect() {\n    // need to have unique clientIds\n    if (this.props.config.remote) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui_UnitSettingDisplay\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui_UnitSettingDisplay\" + Math.random()\n      );\n    }\n    this.client.connect({ onSuccess: this.onConnect, timeout: 180});\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  onConnect() {\n    console.log(this.client.clientId)\n    this.client.subscribe(\n      [\n        \"pioreactor\",\n        this.props.unit,\n        this.props.experiment,\n        this.props.topic,\n      ].join(\"/\"),\n      { qos: 1 }\n    );\n  }\n\n  stateDisplay = {\n    \"init\":          {display: \"Starting\", color: onlineGreen},\n    \"ready\":         {display: \"On\", color: onlineGreen},\n    \"sleeping\":      {display: \"Paused\", color: offlineGrey},\n    \"disconnected\":  {display: \"Off\", color: offlineGrey},\n    \"lost\":          {display: \"Lost\", color: errorRed},\n    \"NA\":            {display: \"Not available\", color: offlineGrey},\n  }\n\n  onMessageArrived(message) {\n    var parsedFloat = parseFloat(message.payloadString);\n    var payload = isNaN(parsedFloat) ? message.payloadString : parsedFloat\n    this.setState({\n      msg: payload,\n    });\n    this.updateParent(payload);\n  }\n\n  render() {\n    if (this.props.isStateSetting) {\n      if (!this.props.isUnitActive) {\n        return <div style={{ color: offlineGrey, fontWeight: 500}}> {this.stateDisplay[this.state.msg].display} </div>;\n      } else {\n        var displaySettings = this.stateDisplay[this.state.msg]\n        return (\n          <div style={{ color: displaySettings.color, fontWeight: 500}}>\n            {displaySettings.display}\n          </div>\n      )}\n    } else {\n      if (!this.props.isUnitActive || this.state.msg === \"\" || this.state.msg === \"\") {\n        return <div style={{ color: offlineGrey, fontSize: \"13px\"}}> {this.props.default} </div>;\n      } else {\n        return (\n          <div style={{ fontSize: \"13px\"}}>\n            {(typeof this.state.msg === \"string\"\n              ? this.state.msg\n              : +this.state.msg.toFixed(this.props.precision)) +\n              (this.props.measurementUnit ? this.props.measurementUnit : \"\")}\n          </div>\n        );\n      }\n    }\n  }\n}\n\n\n\nfunction ButtonConfirmStopProcessDialog() {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const onConfirm = () => {\n    fetch(\"/stop\")\n    handleClose()\n  }\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <React.Fragment>\n      <Button style={{textTransform: 'none', marginRight: \"10px\", float: \"right\"}} color=\"secondary\" onClick={handleClickOpen}>\n        <ClearIcon className={classes.textIcon}/> Stop all activity\n      </Button>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{\"Stop all Pioreactor activity?\"}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            This will stop stirring, optical density measuring, and dosing events from occurring in <b>all</b> Pioreactor units.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onConfirm} color=\"primary\">\n            OK\n          </Button>\n          <Button onClick={handleClose} color=\"primary\" autoFocus>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </React.Fragment>\n  );\n}\n\n\nfunction AddNewPioreactor(props){\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [name, setName] = React.useState(\"\");\n  const [isRunning, setIsRunning] = React.useState(false)\n  const [errorMsg, setErrorMsg] = React.useState(\"\")\n  const [isError, setIsError] = React.useState(\"\")\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false)\n  }\n\n  const handleNameChange = evt => {\n    setName(evt.target.value)\n  }\n\n  const onSubmit = (event) =>{\n    event.preventDefault()\n    if (!name) {\n      setIsError(true)\n      setErrorMsg(\"Fill in the new name.\")\n      return\n    }\n    setIsError(false)\n    setIsRunning(true)\n    fetch('add_new_pioreactor',{\n        method: \"POST\",\n        body: JSON.stringify({newPioreactorName: name}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n    })\n    .then(response => {\n        if(response.ok)\n        {\n          return response.json();\n        }\n        throw new Error('Something went wrong.');\n    })\n    .then(text => {\n      console.log('Request successful', text);\n    })\n    .catch(error => {\n      setIsError(true)\n      setErrorMsg(\"Unable to complete installation. Check server logs.\")\n      setIsRunning(false)\n    });\n  }\n\n  const runningFeedback = isRunning ? <CircularProgress color=\"inherit\" size={24}/> : \"Install and connect\"\n\n  return (\n    <React.Fragment>\n    <Button onClick={handleClickOpen} style={{textTransform: 'none', float: \"right\", marginRight: \"0px\"}} color=\"primary\">\n      <AddIcon className={classes.textIcon}/> Add new Pioreactor\n    </Button>\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle>\n        <Typography className={classes.unitTitleDialog}>\n        Add new Pioreactor\n        </Typography>\n      </DialogTitle>\n      <DialogContent>\n      <p> To add a new Pioreactor, you'll need the following: </p>\n      <ul>\n        <li>A RaspberryPi, with power cord</li>\n        <li>A microSD card</li>\n        <li>A computer with internet access that can read & write to the microSD card</li>\n        <li>The Pioreactor hardware hat</li>\n      </ul>\n      <p> With that all ready, let's begin: </p>\n      <ol>\n        <li>Flash the Raspberry Pi OS Lite onto the microSD card. Here's a <a href=\"https://www.youtube.com/watch?v=J024soVgEeM\">short video</a> on how.</li>\n        <li>Remove the microSD card, and put it <b>back in</b>.</li>\n        <li>Onto the microSD card, create an empty file named <code>ssh</code>.</li>\n        <li>Also onto the microSD card, create a file named <code>wpa_supplicant.conf</code>, with the following contents:</li>\n        <pre style={{border: \"1px #b9b9b9 solid\", padding: \"5px 10px\", maxWidth: \"85%\"}}>\n{`country=CA # Your 2-digit country code, ex: US, GB, CA\nctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev\nnetwork={\n    ssid=\"your network name\"\n    psk=\"your network password\"\n    key_mgmt=WPA-PSK\n}`}\n       </pre>\n        <li>Unmount the microSD, insert it into the RaspberryPi, and attach the Pioreactor hat to the RaspberryPi.</li>\n        <li>Turn on the RaspberryPi by inserting the power cord.</li>\n      </ol>\n\n      <p>We're pretty much done at this point. Below, provide a unique name for your new Pioreactor, and\n      we'll automatically install the required software and connect it to the other Pioreactors.\n      </p>\n\n      <p>It will take up to 5 minutes to install the software. When finished, the new Pioreactor\n      will show up on on this page. You don't need to stay on this page while it's installing.</p>\n\n      {isRunning? <p><b>Installation is occuring in the background. You may navigate away from this page. </b></p> : <p></p>}\n      {isError? <p><b>{errorMsg}</b></p> : <p></p>}\n\n      <div >\n        <TextField\n          size=\"small\"\n          id=\"new-pioreactor-name\"\n          label=\"New Pioreactor's name\"\n          variant=\"outlined\"\n          className={classes.textFieldWide}\n          onChange={handleNameChange}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <PioreactorIcon style={{fontSize: \"1.1em\"}}/>\n              </InputAdornment>\n            ),\n          }}\n        />\n      </div>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        style={{marginTop: \"15px\"}}\n        onClick={onSubmit}\n        type=\"submit\"\n      >\n        {runningFeedback}\n      </Button>\n\n      </DialogContent>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={\"Installing new Pioreactor\"}\n      autoHideDuration={7000}\n      key={\"snackbar-add-new\"}\n    />\n    </React.Fragment>\n)}\n\n\n\nfunction PioreactorHeader(props) {\n\n  return (\n    <div>\n      <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\"}}>\n        <Typography variant=\"h5\" component=\"h1\">\n          <Box fontWeight=\"fontWeightBold\">\n            Pioreactors\n          </Box>\n        </Typography>\n        <div >\n          <AddNewPioreactor config={props.config}/>\n        </div>\n      </div>\n      <Divider/>\n    </div>\n  )\n}\n\n\n\nfunction PatientButton(props) {\n  const [buttonText, setButtonText] = useState(props.buttonText)\n\n  useEffect(\n    () => {\n      setButtonText(props.buttonText)\n    }\n  , [props.buttonText])\n\n  function wrappingOnClick() {\n    function f() {\n      setButtonText(<CircularProgress color=\"inherit\" size={22}/>)\n      props.onClick()\n    }\n    return f\n  }\n\n  return (\n    <Button\n      disableElevation\n      style={{width: \"70px\", marginTop: \"5px\"}}\n      color={props.color}\n      variant={props.variant}\n      size=\"small\"\n      onClick={wrappingOnClick()}\n    >\n      {buttonText}\n    </Button>\n  )\n}\n\n\n\nfunction SettingsActionsDialog(props) {\n  const classes = useStyles();\n  const [defaultStirring, setDefaultStirring] = useState(0);\n  const [open, setOpen] = useState(false);\n  const [client, setClient] = useState(null);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState(\"\");\n  const [tabValue, setTabValue] = React.useState(0);\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      await fetch(\"/get_config/config_\" + props.unit + \".ini\")\n        .then((response) => {\n            if (response.ok) {\n              return response.text();\n            } else {\n              throw new Error('Something went wrong');\n            }\n          })\n        .then((config) => {\n          config = parseINIString(config);\n          setDefaultStirring(\n            config[\"stirring\"][\"duty_cycle_\" + props.unit]\n          );\n        })\n        .catch((error) => {})\n    }\n    if (!props.disabled) {\n      fetchData();\n    }\n  }, [props.disabled, props.unit]);\n\n  useEffect(() => {\n    if (!props.config['network.topology']){\n      return\n    }\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_SettingsActionsDialog\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui_SettingsActionsDialog\" + Math.random()\n      );\n    }\n    client.connect({timeout: 180});\n    setClient(client)\n  },[props.config])\n\n\n  function setPioreactorJobState(job, state) {\n    return function sendMessage() {\n      var message = new Message(String(state));\n      message.destinationName = [\n        \"pioreactor\",\n        props.unit,\n        props.experiment,\n        job,\n        \"$state\",\n        \"set\",\n      ].join(\"/\");\n      message.qos = 1;\n      try{\n        client.publish(message);\n      }\n      catch (e){\n        console.log(e)\n        setTimeout(() => {sendMessage()}, 750)\n      }\n    };\n  }\n\n  function startPioreactorJob(job_attr){\n    return function() {\n      fetch(\"/run/\" + job_attr + \"/\" + props.unit).then(res => {\n      })\n    }\n  }\n\n  function setPioreactorJobAttr(job_attr, value) {\n    var message = new Message(String(value));\n    message.destinationName = [\n      \"pioreactor\",\n      props.unit,\n      props.experiment,\n      job_attr,\n      \"set\",\n    ].join(\"/\");\n    message.qos = 1;\n    try{\n      client.publish(message);\n    }\n    catch (e) {\n      console.log(e)\n      client.connect({onSuccess: () => setPioreactorJobAttr(job_attr, value)});\n    }\n  }\n\n  function setPioreactorJobAttrOnEnter(e) {\n    if (e.key === \"Enter\") {\n      setPioreactorJobAttr(e.target.id, e.target.value);\n      setSnackbarMessage(`Updated to ${e.target.value}.`)\n      setSnackbarOpen(true)\n    }\n  }\n\n  function setPioreactorStirring(e, value) {\n    setPioreactorJobAttr(\"stirring/duty_cycle\", value);\n  }\n\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setTabValue(0)\n    setOpen(false);\n  };\n\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false)\n  }\n\n\n  function createUserButtonsBasedOnState(jobState, job, parentJob=null){\n\n    parentJob = parentJob || job\n    switch (jobState){\n      case \"lost\":\n      case \"disconnected\":\n       return (<div>\n               <PatientButton\n                color=\"primary\"\n                variant=\"contained\"\n                onClick={startPioreactorJob(job)}\n                buttonText=\"Start\"\n               />\n              </div>)\n      case \"init\":\n      case \"ready\":\n        return (<div>\n          <PatientButton\n            color=\"secondary\"\n            variant=\"contained\"\n            onClick={setPioreactorJobState(job, \"sleeping\")}\n            buttonText=\"Pause\"\n          />\n          <PatientButton\n            color=\"secondary\"\n            onClick={setPioreactorJobState(parentJob, \"disconnected\")}\n            buttonText=\"Stop\"\n          />\n        </div>)\n      case \"sleeping\":\n        return (\n          <div>\n            <PatientButton\n              color=\"primary\"\n              variant=\"contained\"\n              onClick={setPioreactorJobState(job, \"ready\")}\n              buttonText=\"Resume\"\n            />\n            <PatientButton\n              color=\"secondary\"\n              onClick={setPioreactorJobState(parentJob, \"disconnected\")}\n              buttonText=\"Stop\"\n            />\n          </div>\n          )\n      default:\n        return(<div></div>)\n    }\n   }\n\n  const odButtons = createUserButtonsBasedOnState(props.ODReadingJobState, \"od_reading\")\n  const grButtons = createUserButtonsBasedOnState(props.growthRateJobState, \"growth_rate_calculating\")\n  const ioButtons = createUserButtonsBasedOnState(props.IOEventsJobState, \"dosing_algorithm\", \"dosing_control\")\n  const stirringButtons = createUserButtonsBasedOnState(props.stirringJobState, \"stirring\")\n\n  return (\n    <div>\n    <IconButton aria-label=\"edit Pioreactor\" onClick={handleClickOpen} disabled={props.disabled} style={{marginTop: \"-8px\"}}>\n      <EditIcon color={props.disabled ? \"disabled\" : \"primary\"}/>\n    </IconButton>\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle>\n        <Typography className={classes.suptitle}>\n          <PioreactorIcon style={{verticalAlign: \"middle\", fontSize: \"1.2em\"}}/> {(props.config['ui.overview.rename'] &&  props.config['ui.overview.rename'][props.unit]) ? `${props.config['ui.overview.rename'][props.unit]} / ${props.unit}` : `${props.unit}`}\n        </Typography>\n      <Tabs variant=\"fullWidth\" value={tabValue} onChange={handleTabChange} indicatorColor=\"primary\" textColor=\"primary\">\n        <Tab label=\"Activities\"/>\n        <Tab label=\"Settings\"/>\n        <Tab label=\"Dosing\"/>\n        <Tab label=\"Calibrate\"/>\n      </Tabs>\n      </DialogTitle>\n      <DialogContent>\n        <TabPanel value={tabValue} index={2}>\n          <Typography  gutterBottom>\n            Add media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the media pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"add_media\" unit={props.unit} />\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Add alternative media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the alternative media pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set\n            volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"add_alt_media\" unit={props.unit} />\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Remove waste\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the waste pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"remove_waste\" unit={props.unit} />\n          <Divider className={classes.divider} />\n        </TabPanel>\n        <TabPanel value={tabValue} index={3}>\n          <Typography  gutterBottom>\n            Pump calibration\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            If any pumps are attached to the Pioreactor, they should be calibrated to often\n            to accurately add a precise amount of media.\n          </Typography>\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Temperature calibration\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            If any pumps are attached to the Pioreactor, they should be calibrated to often\n            to accurately add a precise amount of media.\n          </Typography>\n          <Divider className={classes.divider} />\n        </TabPanel>\n        <TabPanel value={tabValue} index={1}>\n          <Typography  gutterBottom>\n            Stirring speed\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Modify the stirring speed (arbitrary units). This will effect the\n            optical density reading. Too low and the fan may completely stop.\n          </Typography>\n          <div className={classes.slider}>\n            <Slider\n              defaultValue={parseInt(props.stirringDCState)}\n              aria-labelledby=\"discrete-slider-custom\"\n              step={1}\n              valueLabelDisplay=\"on\"\n              id={\"stirring/duty_cycle_\" + props.unit}\n              key={\"stirring/duty_cycle_\" + props.unit}\n              onChangeCommitted={setPioreactorStirring}\n              marks={[\n                { value: 0, label: \"0\", key: \"slider-0\" },\n                { value: defaultStirring, label: \"Default: \" + defaultStirring, key: \"slider-default\"},\n                { value: 100, label: \"100\", key: \"slider-100\" },\n              ]}\n            />\n          </div>\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Volume / dosing\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the volume per dilution. Typical values are between 0.0mL and\n            1.0mL.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"dosing_algorithm/volume\"\n            label=\"Volume / dosing\"\n            defaultValue={props.volumeState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">mL</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Target OD\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the target optical density. Typical values are between 1.0 and\n            2.5 (arbitrary units)\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"dosing_algorithm/target_od\"\n            label=\"Target optical density\"\n            defaultValue={props.targetODState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">AU</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Duration between dosing events\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change how long to wait between dilutions. Typically between 5 and 90 minutes. Changing this will immediately trigger\n            a dosing event.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"dosing_algorithm/duration\"\n            label=\"Duration\"\n            defaultValue={props.durationState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Target growth rate\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the target hourly growth rate - only applicable in{\" \"}\n            <code>morbidostat</code> mode. Typical values are between 0.05h and\n            0.4h.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"dosing_algorithm/target_growth_rate\"\n            label=\"Target growth rate\"\n            defaultValue={props.targetGrowthRateState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">h</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Dosing algorithm\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            {props.IOEventsJobState !== \"disconnected\" &&\n              <React.Fragment>\n              Currently running dosing algorithm <code>{props.dosingAlgorithm}</code>.\n              Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/dosing-algorithms\">dosing algorithms</a>.\n              </React.Fragment>\n            }\n            {props.IOEventsJobState === \"disconnected\" &&\n\n              <React.Fragment>\n              You can change the Dosing algorthm after starting the job.\n              </React.Fragment>\n            }\n          </Typography>\n\n          <ButtonChangeDosingDialog\n            unit={props.unit}\n            config={props.config}\n            experiment={props.experiment}\n            currentDosingAlgorithm={props.dosingAlgorithm}\n          />\n          <Divider className={classes.divider} />\n        </TabPanel>\n        <TabPanel value={tabValue} index={0}>\n          <Typography gutterBottom>\n            Stirring\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Start, stop or pause the stirring on the Pioreactor. Stirring is needed for homogenous mixing.\n          </Typography>\n\n          {stirringButtons}\n\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Optical density\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Pausing the optical density readings will also pause\n            downstream activities that rely on optical density readings, like growth\n            rates.\n          </Typography>\n\n          {odButtons}\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Growth rate\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Pausing the growth rate calculating will also pause\n            downstream activities that rely on it, like dosing events.\n          </Typography>\n\n          {grButtons}\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Dosing events\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            {props.IOEventsJobState !== \"disconnected\" &&\n              <React.Fragment>\n              Currently running dosing algorithm <code>{props.dosingAlgorithm}</code>.\n              Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/dosing-algorithms\">dosing algorithms</a>.\n              </React.Fragment>\n            }\n            {props.IOEventsJobState === \"disconnected\" &&\n\n              <React.Fragment>\n              Dosing events will initially start in <span className={\"underlineSpan\"} title=\"silent mode performs no dosing operations.\"><code>silent</code></span> mode, and can be changed after.\n              Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/dosing-algorithms\">dosing algorithms</a>.\n              </React.Fragment>\n            }\n          </Typography>\n\n            {ioButtons}\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Temperature controlling\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Us at Pioreactor are working on including per-reactor temperature control. Stay tuned!\n          </Typography>\n\n          <Divider className={classes.divider} />\n        </TabPanel>\n      </DialogContent>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={snackbarMessage}\n      autoHideDuration={7000}\n      key={\"snackbar\" + props.unit + \"settings\"}\n    />\n    </div>\n  );\n}\n\n\nfunction SettingsActionsDialogAll(props) {\n\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [client, setClient] = useState(null);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState(\"\");\n  const [tabValue, setTabValue] = React.useState(0);\n\n  const hrJobs = {\n    \"od_reading\":  \"optical density reading\",\n    \"growth_rate_calculating\":  \"growth rate activity\",\n    \"stirring\":  \"stirring\",\n    \"algorithm_controlling\":  \"dosing events\",\n    \"dosing_control\":  \"dosing events\",\n  }\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  useEffect(() => {\n    if (!props.config['network.topology']){\n      return\n    }\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_SettingsActionsDialogAll\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui_SettingsActionsDialogAll\" + Math.random()\n      );\n    }\n    client.connect({timeout: 180});\n    setClient(client)\n  },[props.config])\n\n\n  function setPioreactorJobState(job, state) {\n    return function sendMessage() {\n      var message = new Message(String(state));\n      message.destinationName = [\n        \"pioreactor\",\n        props.unit,\n        props.experiment,\n        job,\n        \"$state\",\n        \"set\",\n      ].join(\"/\");\n      message.qos = 1;\n      try{\n        client.publish(message);\n      }\n      catch (e){\n        console.log(e)\n        setTimeout(() => {sendMessage()}, 750)\n      }\n      finally {\n        const verbs = {\n          \"sleeping\":  \"Pausing\",\n          \"disconnected\":  \"Stopping\",\n          \"ready\":  \"Resuming\",\n        }\n        setSnackbarMessage(`${verbs[state]} ${hrJobs[job]} on all active Pioreactors`)\n        setSnackbarOpen(true)\n      }\n    };\n  }\n\n  function startPioreactorJob(job){\n    return function() {\n      setSnackbarMessage(`Starting ${hrJobs[job]} on all active Pioreactors`)\n      setSnackbarOpen(true)\n      fetch(\"/run/\" + job + \"/\" + props.unit)\n    }\n  }\n\n  function setPioreactorJobAttr(job_attr, value) {\n    var message = new Message(String(value));\n    message.destinationName = [\n      \"pioreactor\",\n      props.unit,\n      props.experiment,\n      job_attr,\n      \"set\",\n    ].join(\"/\");\n    message.qos = 1;\n    try{\n      setSnackbarOpen(true)\n    }\n    catch (e) {\n      console.log(e)\n      client.connect({onSuccess: () => setPioreactorJobAttr(job_attr, value)});\n    }\n  }\n\n  function setPioreactorJobAttrOnEnter(e) {\n    if (e.key === \"Enter\") {\n      setPioreactorJobAttr(e.target.id, e.target.value);\n      setSnackbarMessage(`Updated to ${e.target.value}.`)\n      setSnackbarOpen(true)\n    }\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setTabValue(0)\n    setOpen(false);\n  };\n\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false)\n  }\n\n\n  function createUserButtonsBasedOnState(job, parentJob=null){\n    parentJob = parentJob || job\n    return (<div>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={startPioreactorJob(job)}\n        >\n          Start\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={setPioreactorJobState(job, \"sleeping\")}\n        >\n          Pause\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={setPioreactorJobState(job, \"ready\")}\n        >\n          Resume\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"secondary\"\n          onClick={setPioreactorJobState(parentJob, \"disconnected\")}\n        >\n          Stop\n        </Button>\n      </div>\n  )}\n\n  const odButtons = createUserButtonsBasedOnState(\"od_reading\")\n  const grButtons = createUserButtonsBasedOnState(\"growth_rate_calculating\")\n  const ioButtons = createUserButtonsBasedOnState(\"dosing_algorithm\", \"dosing_control\")\n  const stirringButtons = createUserButtonsBasedOnState(\"stirring\")\n\n  return (\n    <React.Fragment>\n    <Button style={{textTransform: 'none', float: \"right\" }} onClick={handleClickOpen} color=\"primary\">\n      <EditIcon className={classes.textIcon}/> Edit all Pioreactors\n    </Button>\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle>\n        <Typography className={classes.suptitle}>\n          All active Pioreactors\n        </Typography>\n      <Tabs value={tabValue} onChange={handleTabChange} indicatorColor=\"primary\" textColor=\"primary\">\n        <Tab label=\"Activities\"/>\n        <Tab label=\"Settings\"/>\n        <Tab label=\"Dosing\"/>\n      </Tabs>\n      </DialogTitle>\n      <DialogContent>\n        <TabPanel value={tabValue} index={1}>\n          <Typography gutterBottom>\n            Volume / dosing\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the volume per dilution. Typical values are between 0.0mL and\n            1.0mL.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"dosing_algorithm/volume\"\n            label=\"Volume / dosing\"\n            defaultValue={props.volumeState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">mL</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Target OD\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the target optical density. Typical values are between 1.0 and\n            2.5 (arbitrary units)\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"dosing_algorithm/target_od\"\n            label=\"Target optical density\"\n            defaultValue={props.targetODState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">AU</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Duration between dosing events\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change how long to wait between dilutions. Typically between 15 and 90 minutes. Changing this will immediately trigger\n            a dosing event.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"dosing_algorithm/duration\"\n            label=\"Duration\"\n            defaultValue={props.durationState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Target growth rate\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the target hourly growth rate - only applicable in{\" \"}\n            <code>morbidostat</code> mode. Typical values are between 0.05h and\n            0.4h.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"dosing_algorithm/target_growth_rate\"\n            label=\"Target growth rate\"\n            defaultValue={props.targetGrowthRateState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">h</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Dosing algorithm\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n              Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/.ex/dosing-algorithms\">dosing algorithms</a>.\n          </Typography>\n\n          <ButtonChangeDosingDialog\n            unit={props.unit}\n            config={props.config}\n            experiment={props.experiment}\n            currentDosingAlgorithm={true}\n            title=\"All active Pioreactors\"\n          />\n          <Divider className={classes.divider} />\n\n        </TabPanel>\n\n        <TabPanel value={tabValue} index={0}>\n          <Typography gutterBottom>\n            Stirring\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Start, stop or pause the stirring on all the Pioreactors. Stirring is needed for homogenous mixing.\n          </Typography>\n\n          {stirringButtons}\n\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Optical density\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Pausing the optical density readings will also pause\n            downstream activities that rely on optical density readings, like growth\n            rates.\n          </Typography>\n\n          {odButtons}\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Growth rate\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Pausing the growth rate calculating will also pause\n            downstream activities that rely on it, like dosing events.\n          </Typography>\n\n          {grButtons}\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Dosing events\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Dosing events will initially start in <span className={\"underlineSpan\"} title=\"silent mode performs no IO operations.\"><code>silent</code></span> mode, and can be changed after.\n            Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/dosing-algorithms\">dosing algorithms</a>.\n          </Typography>\n\n            {ioButtons}\n          <Divider className={classes.divider} />\n        </TabPanel>\n        <TabPanel value={tabValue} index={2}>\n          <Typography  gutterBottom>\n            Add media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the media pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"add_media\" unit={props.unit} />\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Add alternative media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the alternative media pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set\n            volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"add_alt_media\" unit={props.unit} />\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Remove waste\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the waste pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"remove_waste\" unit={props.unit} />\n          <Divider className={classes.divider} />\n        </TabPanel>\n      </DialogContent>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={snackbarMessage}\n      autoHideDuration={7000}\n      key={\"snackbar\" + props.unit + \"settings\"}\n    />\n    </React.Fragment>\n  );\n}\n\n\nfunction ActiveUnits(props){\n  return (\n  <React.Fragment>\n    <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\", marginTop: \"15px\"}}>\n      <Typography variant=\"h5\" component=\"h2\">\n        <Box fontWeight=\"fontWeightRegular\">\n          Active Pioreactors\n        </Box>\n      </Typography>\n      <div >\n        <SettingsActionsDialogAll unit={'$broadcast'} config={props.config} experiment={props.experiment}/>\n        <ButtonConfirmStopProcessDialog/>\n      </div>\n    </div>\n    {props.units.map(unit =>\n      <PioreactorCard isUnitActive={true} key={unit} unit={unit} config={props.config} experiment={props.experiment}/>\n  )}\n  </React.Fragment>\n)}\n\nfunction FlashLEDButton(props){\n  const color = \"#5331CA\"\n  const [client, setClient] = useState(null)\n\n  useEffect(() => {\n    if (!props.config['network.topology']){\n      return\n    }\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_FlashLEDButton\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui_FlashLEDButton\" + Math.random()\n      );\n    }\n    client.connect({timeout: 180});\n    setClient(client)\n  },[props.config])\n\n\n  const onClick = () => {\n    var message = new Message(\"1\");\n    message.destinationName = [\n      \"pioreactor\",\n      props.unit,\n      \"$experiment\",\n      \"monitor\",\n      \"flicker_led\",\n    ].join(\"/\");\n    message.qos = 0;\n    try{\n      client.publish(message);\n    }\n    catch (e){\n      console.log(e)\n      setTimeout(() => {onClick()}, 1000)\n    }\n  }\n\n  return (\n    <IconButton onClick={onClick} aria-label=\"flask LED on Pioreactor\" style={{marginTop: \"-8px\"}}>\n      <FlareIcon style={{fill: color}}/>\n    </IconButton>\n)}\n\n\nfunction PioreactorCard(props){\n  const classes = useStyles();\n  const unit = props.unit\n  const isUnitActive = props.isUnitActive\n  const experiment = props.experiment\n  const [stirringDCState, setStirringDCState] = useState(0);\n  const [stirringJobState, setStirringJobState] = useState(\"disconnected\");\n  const [ODReadingJobState, setODReadingJobState] = useState(\"disconnected\");\n  const [growthRateJobState, setGrowthRateJobState] = useState(\"disconnected\");\n  const [IOEventsJobState, setIOEventsJobState] = useState(\"disconnected\");\n  const [temperatureControllingJobState, setTemperatureControllingJobState] = useState(\"disconnected\");\n  const [targetODState, setTargetODState] = useState(0);\n  const [durationState, setDurationState] = useState(0);\n  const [targetGrowthRateState, setTargetGrowthRateState] = useState(0);\n  const [volumeState, setVolumeState] = useState(0);\n  const [dosingAlgorithm, setDosingAlgorithm] = useState(null);\n  const [temperature, setTemperature] = useState(0);\n\n  return (\n    <Card className={classes.pioreactorCard} id={unit}>\n\n      <CardContent className={classes.cardContent}>\n        <div className={\"fixme\"}>\n          <Typography className={clsx(classes.suptitle)} color=\"textSecondary\">\n            {(props.config['ui.overview.rename'] && props.config['ui.overview.rename'][unit]) ? unit : \"\"}\n          </Typography>\n          <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n            <Typography className={clsx(classes.unitTitle, {[classes.disabledText]: !isUnitActive})} gutterBottom>\n              <PioreactorIcon color={isUnitActive ? \"inherit\" : \"disabled\"} style={{verticalAlign: \"middle\"}}/> {(props.config['ui.overview.rename'] && props.config['ui.overview.rename'][unit]) ? props.config['ui.overview.rename'][unit] : unit }\n            </Typography>\n            <div style={{display: \"flex\", justifyContent: \"right\"}}>\n              <div>\n                <FlashLEDButton config={props.config} unit={unit}/>\n              </div>\n                <SettingsActionsDialog\n                  config={props.config}\n                  stirringDCState={stirringDCState}\n                  ODReadingJobState={ODReadingJobState}\n                  growthRateJobState={growthRateJobState}\n                  stirringJobState={stirringJobState}\n                  IOEventsJobState={IOEventsJobState}\n                  temperatureControllingJobState={temperatureControllingJobState}\n                  targetGrowthRateState={targetGrowthRateState}\n                  volumeState={volumeState}\n                  durationState={durationState}\n                  targetODState={targetODState}\n                  dosingAlgorithm={dosingAlgorithm}\n                  temperature={temperature}\n                  experiment={experiment}\n                  unit={unit}\n                  disabled={!isUnitActive}\n                />\n              <div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n\n      <div style={{display: \"flex\", margin: \"15px 20px 20px 0px\"}}>\n        <div className={classes.textboxLabel}>\n          <Typography variant=\"body2\" component=\"body1\">\n            <Box fontWeight=\"fontWeightBold\" className={clsx({[classes.disabledText]: !isUnitActive})}>\n              Activities:\n            </Box>\n          </Typography>\n        </div>\n\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Stirring\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setStirringJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"disconnected\"\n            isStateSetting\n            topic=\"stirring/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Optical density\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setODReadingJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"disconnected\"\n            isStateSetting\n            topic=\"od_reading/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Growth rate\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setGrowthRateJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"disconnected\"\n            isStateSetting\n            topic=\"growth_rate_calculating/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Dosing events\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setIOEventsJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"disconnected\"\n            isStateSetting\n            topic=\"dosing_algorithm/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Temperature control\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setTemperatureControllingJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"NA\"\n            isStateSetting\n            topic=\"temperature_control/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n      </div>\n      <Divider/>\n\n\n      <div style={{display: \"flex\", margin: \"20px 20px 20px 0px\"}}>\n        <div className={classes.textboxLabel}>\n          <Typography variant=\"body2\" component=\"body1\">\n            <Box fontWeight=\"fontWeightBold\"  className={clsx({[classes.disabledText]: !isUnitActive})}>\n              Settings:\n            </Box>\n          </Typography>\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Stirring speed\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setStirringDCState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"\"\n            className={classes.alignRight}\n            topic=\"stirring/duty_cycle\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Volume / dosing\n          </Typography>\n          <UnitSettingDisplay\n            precision={2}\n            measurementUnit=\"mL\"\n            experiment={experiment}\n            passChildData={setVolumeState}\n            isUnitActive={isUnitActive}\n            default=\"\"\n            className={classes.alignRight}\n            topic=\"dosing_algorithm/volume\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Target OD\n          </Typography>\n          <UnitSettingDisplay\n            precision={2}\n            experiment={experiment}\n            passChildData={setTargetODState}\n            isUnitActive={isUnitActive}\n            default={\"\"}\n            className={classes.alignRight}\n            topic=\"dosing_algorithm/target_od\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Target growth rate\n          </Typography>\n          <UnitSettingDisplay\n            precision={2}\n            measurementUnit=\"h\"\n            experiment={experiment}\n            passChildData={setTargetGrowthRateState}\n            isUnitActive={isUnitActive}\n            default=\"\"\n            className={classes.alignRight}\n            topic=\"dosing_algorithm/target_growth_rate\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Dosing algorithm\n          </Typography>\n          <UnitSettingDisplay\n            experiment={experiment}\n            passChildData={setDosingAlgorithm}\n            isUnitActive={isUnitActive}\n            default=\"\"\n            className={classes.alignRight}\n            topic=\"dosing_control/dosing_algorithm\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Time between dosing events\n          </Typography>\n          <UnitSettingDisplay\n            precision={0}\n            measurementUnit=\"m\"\n            experiment={experiment}\n            passChildData={setDurationState}\n            isUnitActive={isUnitActive}\n            default=\"\"\n            className={classes.alignRight}\n            topic=\"dosing_algorithm/duration\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Target temperature\n          </Typography>\n          <UnitSettingDisplay\n            experiment={experiment}\n            passChildData={setTemperature}\n            isUnitActive={isUnitActive}\n            default=\"\"\n            className={classes.alignRight}\n            topic=\"temperature_control/temperature\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n      </div>\n\n\n      </CardContent>\n    </Card>\n)}\n\n\nfunction InactiveUnits(props){\n\n  return (\n  <React.Fragment>\n    <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\", marginTop: \"15px\"}}>\n      <Typography variant=\"h5\" component=\"h2\">\n        <Box fontWeight=\"fontWeightRegular\">\n          Inactive Pioreactors\n        </Box>\n      </Typography>\n    </div>\n    {props.units.map(unit =>\n      <PioreactorCard isUnitActive={false} key={unit} unit={unit} config={props.config} experiment={props.experiment}/>\n  )}\n    </React.Fragment>\n)}\n\nfunction Pioreactors(props) {\n    const [experimentMetadata, setExperimentMetadata] = React.useState({})\n\n    React.useEffect(() => {\n      async function getLatestExperiment() {\n           await fetch(\"/get_latest_experiment\")\n          .then((response) => {\n            return response.json();\n          })\n          .then((data) => {\n            setExperimentMetadata(data)\n          });\n        }\n      getLatestExperiment()\n    }, [])\n\n    const entries = (a) => Object.entries(a)\n\n    return (\n        <Grid container spacing={2} >\n          <Grid item xs={12}><Header /></Grid>\n          <Grid item xs={12} />\n          <Grid item xs={12} />\n\n          <Grid item md={1} xs={1}/>\n          <Grid item md={10} xs={12}>\n            <PioreactorHeader experiment={experimentMetadata.experiment}/>\n            <ActiveUnits experiment={experimentMetadata.experiment} config={props.config} units={props.config['inventory'] ? entries(props.config['inventory']).filter((v) => v[1] === \"1\").map((v) => v[0]) : [] }/>\n            <InactiveUnits experiment={experimentMetadata.experiment} config={props.config} units={props.config['inventory'] ? entries(props.config['inventory']).filter((v) => v[1] === \"0\").map((v) => v[0]) : [] }/>\n          </Grid>\n          <Grid item md={1} xs={1}/>\n          {props.config['ui.overview.rename'] ? <TactileButtonNotification config={props.config}/> : null}\n        </Grid>\n    )\n}\n\nexport default Pioreactors;\n\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport StepContent from '@material-ui/core/StepContent';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  button: {\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(1),\n  },\n  actionsContainer: {\n    marginBottom: theme.spacing(2),\n  },\n  resetContainer: {\n    padding: theme.spacing(3),\n  },\n  divInstructions: {\n    marginBottom: theme.spacing(3),\n  }\n}));\n\n\n\nfunction CycleLiquid(props) {\n  const classes = useStyles();\n  const liquid = props.liquid\n  const [isClicked, setIsClicked] = React.useState(false)\n\n  const onSubmit = () => {\n    fetch(\"/run/remove_waste/$broadcast?\" + new URLSearchParams({duration: 90, duty_cycle: 100}));\n    fetch(\"/run/add_media/$broadcast?\" + new URLSearchParams({duration: 50, duty_cycle: 25}));\n    fetch(\"/run/add_alt_media/$broadcast?\" + new URLSearchParams({duration: 50, duty_cycle: 25}));\n    setIsClicked(true)\n  }\n\n  return (\n    <div className={classes.divInstructions}>\n      <p>{props.additionalMsg}</p>\n      <p>Add <b>{liquid}</b> to the non-waste containers. We will cycle this solution through our system. Click the button below once the {liquid} is in place.</p>\n      <Button className={classes.button} variant=\"contained\" color={isClicked ? \"default\" : \"primary\" } onClick={onSubmit}>Cycle {liquid}</Button>\n    </div>\n    )\n}\n\n\nfunction MediaFlush(props) {\n  const classes = useStyles();\n  const isAlt = props.altMedia\n  const [isClicked, setIsClicked] = React.useState(false)\n\n  const onSubmit = () => {\n    fetch(\"/run/remove_waste/$broadcast?\" + new URLSearchParams({duration: 60, duty_cycle: 100}));\n    if (isAlt){\n      fetch(\"/run/add_alt_media/$broadcast?\" + new URLSearchParams({duration: 15, duty_cycle: 25}));\n    } else {\n      fetch(\"/run/add_media/$broadcast?\" + new URLSearchParams({duration: 15, duty_cycle: 25}));\n    }\n    setIsClicked(true)\n  }\n\n  return (\n    <div className={classes.divInstructions}>\n      <p>Next, we will prime the {isAlt ? \"alt-\" : \"\"}media tubes with our {isAlt ? \"alt-\" : \"\"}media.</p>\n      <p>Replace the container attached to the {isAlt ? \"alt-\" : \"\"}media outflow tubes with the sterlized {isAlt ? \"alt-\" : \"\"}media container. Remember to use proper sanitation techniques!</p>\n      <Button className={classes.button} variant=\"contained\" color={isClicked ? \"default\" : \"primary\" } onClick={onSubmit}>Run {isAlt ? \"alt-\" : \"\"}media and waste pumps</Button>\n    </div>\n    )\n}\n\nfunction AddFinalVolumeOfMedia(props) {\n  const classes = useStyles();\n  const [isClicked, setIsClicked] = React.useState(false)\n\n\n  const onSubmit = () => {\n    fetch(\"/run/add_media/$broadcast?\" + new URLSearchParams({ml: 12}));\n    setIsClicked(true)\n  }\n\n  return (\n    <div className={classes.divInstructions}>\n      <p> Finally, we will add fresh media to our vials </p>\n      <Button className={classes.button} variant=\"contained\" color={isClicked ? \"default\" : \"primary\" } onClick={onSubmit}>Add 12mL of media</Button>\n    </div>\n    )\n}\n\n\nfunction getSteps() {\n  return [\n    'Setup inflow and outflow tubes',\n    '10% bleach cycling',\n    '70% alcohol cycling',\n    'Distilled water cycling',\n    'Media preparation',\n    'Alt media preparation',\n    'Replace vials',\n    'Add initial media to vials'];\n}\n\n\nfunction getStepContent(step) {\n  switch (step) {\n    case 0:\n      return `For each pioreactor unit, connect the media inflow, alt-media inflow, and waste out flow tubes to an empty\n      vial with hat. Connect the all the media outflow tubes to a single empty container, all the alt-media outflow tubes to a single empty container, and\n      all the waste inflow tubes to a single, empty, large container.`;\n    case 1:\n      return <CycleLiquid liquid={\"10% bleach solution\"}/>;\n    case 2:\n      return <CycleLiquid additionalMsg={\"Remove any excess bleach from the containers, and empty the waste container. Bleach and alcohol should not mix.\"} liquid={\"70% alcohol\"}/>;\n    case 3:\n      return <CycleLiquid liquid={\"distilled water\"}/>;\n    case 4:\n      return <MediaFlush />;\n    case 5:\n      return <MediaFlush altMedia={true}/>;\n    case 6:\n      return `Using proper sanitation techniques, replace the pioreactor vials - now full of water and media - with the empty-but-innocculated vials`;\n    case 7:\n      return <AddFinalVolumeOfMedia/>;\n    default:\n      return 'Unknown step';\n  }\n}\n\nexport default function VerticalLinearStepper() {\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = React.useState(0);\n  const steps = getSteps();\n\n  const handleNext = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  const handleReset = () => {\n    setActiveStep(0);\n  };\n\n  return (\n    <div className={classes.root}>\n      <Stepper activeStep={activeStep} orientation=\"vertical\">\n        {steps.map((label, index) => (\n          <Step key={label}>\n            <StepLabel>{label}</StepLabel>\n            <StepContent>\n              <Typography>{getStepContent(index)}</Typography>\n              <div className={classes.actionsContainer}>\n                  <Button\n                    disabled={activeStep === 0}\n                    onClick={handleBack}\n                    className={classes.button}\n                  >\n                    Back\n                  </Button>\n                  <Button\n                    variant=\"contained\"\n                    onClick={handleNext}\n                    className={classes.button}\n                  >\n                    {activeStep === steps.length - 1 ? 'Finish' : 'Next'}\n                  </Button>\n              </div>\n            </StepContent>\n          </Step>\n        ))}\n      </Stepper>\n      {activeStep === steps.length && (\n        <Paper square elevation={0} className={classes.resetContainer}>\n          <Typography>All cleaning and preparation steps completed!</Typography>\n          <Button onClick={handleReset} className={classes.button}>\n            Reset\n          </Button>\n        </Paper>\n      )}\n    </div>\n  );\n}","import React from \"react\";\nimport Grid from '@material-ui/core/Grid';\nimport Button from \"@material-ui/core/Button\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Chart from \"./Chart\";\n\n\n\nfunction StartStirringButton(props){\n\n  const [isClicked, setIsClicked] = React.useState(false)\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n\n  const onClick = (e) => {\n    setIsClicked(true)\n    fetch(\"/run/stirring/$broadcast\").then(res => {\n      if (res.status === 200){\n        setOpenSnackbar(true);\n      }\n    })\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return(\n    <div>\n      <p> To get an accurate reading, we need to start start the stirring. This also provides gas transfer and keeps the cells in suspension.</p>\n      <Button variant=\"contained\"  color=\"primary\" disabled={isClicked ? true : false } onClick={onClick}> Start stirring </Button>\n      <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={openSnackbar}\n      onClose={handleSnackbarClose}\n      message={\"Stirring starting\"}\n      autoHideDuration={7000}\n      key={\"snackbarStirring\"}\n    />\n  </div>\n  )\n}\n\n\nfunction StartODReading(props){\n\n  const [isClicked, setIsClicked] = React.useState(false)\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n\n  const onClick = (e) => {\n    setIsClicked(true)\n    fetch(\"/run/od_reading/$broadcast\").then(res => {\n      if (res.status === 200){\n        setOpenSnackbar(true);\n      }\n    })\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return(\n    <div>\n      <p> Next, we will turn on the optical density reading. We also call this <em>OD readings</em>. This will provide us with a measure of cell density. After a minute or so, you should see the data in the chart below. </p>\n      <Button variant=\"contained\"  color=\"primary\" disabled={isClicked ? true : false } onClick={onClick}> Start OD readings </Button>\n      <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={openSnackbar}\n      onClose={handleSnackbarClose}\n      message={\"OD reading starting\"}\n      autoHideDuration={7000}\n      key={\"snackbarOD\"}\n    />\n  </div>\n  )\n}\n\n\nfunction StartSensors(props){\n\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"flex-start\"\n      alignItems=\"center\"\n      spacing={2}\n    >\n      <Grid item xs={2}/>\n      <Grid item xs={10}><StartStirringButton/></Grid>\n      <Grid item xs={10}><StartODReading/></Grid>\n      <Grid item xs={12}>\n        <Chart\n          config={props.config}\n          isODReading={true}\n          fontScale={1.0}\n          interpolation=\"stepAfter\"\n          title=\"Raw 135 optical density\"\n          topic=\"od_raw/135/+\"\n          yAxisLabel=\"Voltage\"\n          experiment=\"+\"\n        />\n      </Grid>\n      <Grid item xs={2}/>\n    </Grid>\n)}\n\n\nexport default StartSensors;\n","\nimport React from \"react\";\nimport Grid from '@material-ui/core/Grid';\nimport Button from \"@material-ui/core/Button\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Chart from \"./Chart\";\n\n\n\nfunction StartGrowthRate(props){\n\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n  const [snackbarMessage, setSnackbarMessage] = React.useState(\"\");\n  const [isClicked, setIsClicked] = React.useState(false);\n\n  const onClick = (e) => {\n    fetch(\"/run/growth_rate_calculating/$broadcast\").then(r => {\n      setSnackbarMessage(\"Growth rate calculating starting\")\n      setOpenSnackbar(true)\n      setIsClicked(true)\n    })\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return(\n    <div>\n      <p>Because of the varying strength & quality of the electronics, not all readings look the same - even for the same density of cells. So we compute a baseline measurement from the OD readings, and measure all growth against that baseline. </p>\n      <p>From the (normalized) OD readings, we can calculate the <em>implied hourly growth rate</em>, which is our measure of growth. </p>\n      <p>Let's start the growth rate calculations. This first computes the normalization constants, <b>which can take up to two minutes to complete</b>. After that, the graph below should start to populate.</p>\n      <Button variant=\"contained\"  color=\"primary\" disabled={isClicked ? true : false } onClick={onClick}> Start growth rate calculations </Button>\n      <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={openSnackbar}\n      onClose={handleSnackbarClose}\n      message={snackbarMessage}\n      autoHideDuration={7000}\n      key={\"snackbarGR\"}\n      />\n  </div>\n  )\n}\n\n\n\n\nfunction StartCalculations(props){\n  const [experiment, setExperiment] = React.useState(\"null_exp\")\n\n  React.useEffect(() => {\n    async function getData() {\n         await fetch(\"/get_latest_experiment\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setExperiment(data.experiment)\n        });\n      }\n      getData()\n  }, [])\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"flex-start\"\n      alignItems=\"center\"\n      spacing={2}\n    >\n      <Grid item xs={2}/>\n      <Grid item xs={10}><StartGrowthRate experiment={experiment}/></Grid>\n      <Grid item xs={12}>\n      <Chart\n        config={props.config}\n        interpolation=\"stepAfter\"\n        fontScale={1}\n        title=\"Implied growth rate\"\n        topic=\"growth_rate\"\n        yAxisLabel=\"Growth rate, h\"\n        experiment={experiment}\n      />\n      </Grid>\n      <Grid item xs={2}/>\n    </Grid>\n)}\n\n\nexport default StartCalculations;\n","import React from \"react\";\nimport moment from \"moment\";\nimport { Client, Message } from \"paho-mqtt\";\n\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport {Typography} from '@material-ui/core';\nimport Button from \"@material-ui/core/Button\";\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport TextField from '@material-ui/core/TextField';\nimport Snackbar from '@material-ui/core/Snackbar';\n\nimport Header from \"./components/Header\"\nimport CleaningScript from \"./components/CleaningScript\"\nimport StartSensors from \"./components/StartSensors\"\nimport StartCalculations from \"./components/StartCalculations\"\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  button: {\n    marginRight: theme.spacing(1),\n  },\n  instructions: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(4),\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n    width: \"60%\"\n  },\n  textField:{\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  },\n  formControl: {\n    margin: theme.spacing(3),\n  },\n  halfTextField: {\n    width: \"95%\"\n  },\n}));\n\n\n\n\nfunction ExperimentSummaryForm(props) {\n  const classes = useStyles();\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n  const [formError, setFormError] = React.useState(false);\n  const [expName, setExpName] = React.useState(\"\");\n  const [timestamp, setTimestamp] = React.useState(moment().format(\"YYYY-MM-DDTHH:mm:ss\"));\n  const [description, setDescription] = React.useState(\"\");\n\n\n  function publishExpNameToMQTT(){\n\n    function onConnect() {\n      var message = new Message(expName);\n      message.destinationName = \"pioreactor/latest_experiment\"\n      message.qos = 1;\n      message.retained = true;\n      client.publish(message);\n    }\n\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_publishExpNameToMQTT\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui_publishExpNameToMQTT\" + Math.random()\n      );\n    }\n    client.connect({ onSuccess: onConnect, timeout: 180});\n\n  }\n\n  function killExistingJobs(){\n     fetch('/stop')\n  }\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if (expName === \"\"){\n      setFormError(true)\n      return\n    }\n    fetch('create_experiment',{\n        method: \"POST\",\n        body: JSON.stringify({experiment : expName, timestamp: timestamp, description: description}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        if (res.status === 200){\n          setFormError(false);\n          setOpenSnackbar(true);\n          killExistingJobs()\n          publishExpNameToMQTT()\n        }\n        else{\n          setFormError(true);\n        }\n      }\n     )\n  }\n\n  const onExpNameChange = (e) => {\n    setExpName(e.target.value)\n  }\n  const onDescChange = (e) => {\n    setDescription(e.target.value)\n  }\n  const onTimestampChange = (e) => {\n    setTimestamp(e.target.value)\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return (\n    <div className={classes.root}>\n        <FormGroup>\n        <Grid container spacing={1}>\n          <Grid item xs={12} md={6}>\n            <TextField\n              error={formError}\n              id=\"expName\"\n              label=\"Experiment name\"\n              required className={`${classes.halfTextField} ${classes.textField}`}\n              onChange={onExpNameChange}\n              />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <TextField\n              id=\"datetime\"\n              label=\"Start time\"\n              type=\"datetime-local\"\n              defaultValue={timestamp}\n              className={`${classes.halfTextField} ${classes.textField}`}\n              onChange={onTimestampChange}\n              InputLabelProps={{\n                shrink: true,\n              }}\n            />\n          </Grid>\n          <Grid item xs={12} md={12}>\n            <TextField\n              label=\"Description\"\n              rowsMax={4}\n              placeholder={\"Add a description: what microbe are you using? What is the media composition? This description can always be changed later.\"}\n              multiline\n              className={classes.textField}\n              onChange={onDescChange}\n              fullWidth={true}\n            />\n          </Grid>\n          <Grid item xs={12} md={10}/>\n          <Grid item xs={12} md={2}>\n            <Button variant=\"contained\" color=\"primary\" onClick={onSubmit}> Create </Button>\n            <Snackbar\n              anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n              open={openSnackbar}\n              onClose={handleSnackbarClose}\n              message={\"Created new experiment\"}\n              autoHideDuration={7000}\n              key={\"snackbar\" + props.unit + props.action}\n            />\n          </Grid>\n        </Grid>\n        </FormGroup>\n    </div>\n  )\n}\n\n\n\nfunction getSteps(config) {\n  return [\n    {title: 'Experiment summary', content: <ExperimentSummaryForm config={config} />, optional: true},\n    {title: 'Cleaning and preparation', content: <CleaningScript config={config}/>, optional: true},\n    {title: 'Start sensors', content: <StartSensors config={config}/>, optional: true},\n    {title: 'Start calculations', content: <StartCalculations config={config}/>, optional: false},\n  ];\n}\n\n\n\nfunction StartNewExperimentContainer(props) {\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = React.useState(0);\n  const [skipped, setSkipped] = React.useState(new Set());\n  const steps = getSteps(props.config);\n\n  const getStepContent = (index) => {\n    return steps[index].content\n  }\n  const isStepOptional = (index) => {\n    return steps[index].optional\n  };\n\n  const isStepSkipped = (step) => {\n    return skipped.has(step);\n  };\n\n  const handleNext = () => {\n    if (activeStep === steps.length - 1){\n      window.location.href = \"/overview\";\n    } else {\n\n      let newSkipped = skipped;\n      if (isStepSkipped(activeStep)) {\n        newSkipped = new Set(newSkipped.values());\n        newSkipped.delete(activeStep);\n      }\n\n      setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      setSkipped(newSkipped);\n      window.scrollTo({top: 0})\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  const handleSkip = () => {\n    if (!isStepOptional(activeStep)) {\n      throw new Error(\"You can't skip a step that isn't optional.\");\n    }\n\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n    setSkipped((prevSkipped) => {\n      const newSkipped = new Set(prevSkipped.values());\n      newSkipped.add(activeStep);\n      return newSkipped;\n    });\n  };\n\n  const handleReset = () => {\n    setActiveStep(0);\n  };\n\n  return (\n    <Card className={classes.root}>\n      <CardContent className={classes.cardContent}>\n        <Typography variant=\"h5\" component=\"h1\">\n          Start a new experiment\n        </Typography>\n        <Stepper activeStep={activeStep}>\n          {steps.map((step, index) => {\n            const stepProps = {};\n            const labelProps = {};\n            if (step.optional) {\n              labelProps.optional = <Typography variant=\"caption\">Optional</Typography>;\n            }\n            if (isStepSkipped(index)) {\n              stepProps.completed = false;\n            }\n            return (\n              <Step key={step.title} {...stepProps}>\n                <StepLabel {...labelProps}>{step.title}</StepLabel>\n              </Step>\n            );\n          })}\n        </Stepper>\n        <div>\n          {activeStep === steps.length ? (\n            <div>\n              <Typography className={classes.instructions}>\n                All steps completed - you&apos;re finished\n              </Typography>\n              <Button onClick={handleReset} className={classes.button}>\n                Reset\n              </Button>\n            </div>\n          ) : (\n            <div>\n              <Typography className={classes.instructions}>{getStepContent(activeStep)}</Typography>\n              <div>\n                <Button disabled={activeStep === 0} onClick={handleBack} className={classes.button}>\n                  Back\n                </Button>\n                {isStepOptional(activeStep) && (\n                  <Button\n                    variant=\"contained\"\n                    onClick={handleSkip}\n                    className={classes.button}\n                  >\n                    Skip\n                  </Button>\n                )}\n\n                <Button\n                  variant=\"contained\"\n                  onClick={handleNext}\n                  className={classes.button}\n                >\n                  {activeStep === steps.length - 1 ? 'Go to overview' : 'Next'}\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n\n\n\nfunction StartNewExperiment(props) {\n    return (\n        <Grid container spacing={2} >\n          <Grid item xs={12}><Header /></Grid>\n\n          <Grid item xs={1}/>\n          <Grid item xs={10}>\n            <div><StartNewExperimentContainer config={props.config}/></div>\n          </Grid>\n          <Grid item xs={1}/>\n        </Grid>\n    )\n}\n\nexport default StartNewExperiment;\n\n","import React from \"react\";\n\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport Button from '@material-ui/core/Button';\nimport Box from '@material-ui/core/Box';\nimport {Typography} from '@material-ui/core';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Select from '@material-ui/core/Select';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport { CodeFlaskReact } from \"react-codeflask\"\n\nimport Header from \"./components/Header\"\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n}));\n\nclass EditableCodeDiv extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      code: \"\",\n      openSnackbar: false,\n      filename: \"config.ini\",\n      snackbarMsg: \"\",\n      isRunning: false,\n      availableConfigs: [\n        {name: \"shared config.ini\", filename: \"config.ini\"},\n      ]\n    };\n    this.saveCurrentCode = this.saveCurrentCode.bind(this);\n  }\n\n  async getConfig(filename) {\n    await fetch(\"/get_config/\" + filename)\n      .then(response => {\n        return response.text();\n      })\n      .then(text => {\n        this.setState({code: text});\n      })\n  }\n\n  async getListOfConfigFiles(filename) {\n    await fetch(\"/get_configs\")\n      .then(response => {\n        return response.json();\n      })\n      .then(json => {\n        this.setState(prevState => ({\n          availableConfigs: [...prevState.availableConfigs, ...json.filter(e => (e !== 'config.ini')).map(e => ({name: e, filename: e}))]\n        }));\n      })\n  }\n\n  saveCurrentCode() {\n    this.setState({isRunning: true})\n    fetch('/save_new_config',{\n        method: \"POST\",\n        body: JSON.stringify({code :this.state.code, filename: this.state.filename}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n    .then(res => {\n      if (res.ok) {\n        this.setState({snackbarMsg: this.state.filename + \" saved and synced.\"})\n      } else {\n        this.setState({snackbarMsg: \"Hm. Something when wrong saving or syncing...\"})\n      }\n      this.setState({openSnackbar: true, isRunning: false});\n    })\n  }\n\n  componentDidMount() {\n    this.getConfig(this.state.filename)\n    this.getListOfConfigFiles()\n  }\n\n  onSelectionChange = (e) => {\n    this.setState({filename: e.target.value})\n    this.getConfig(e.target.value)\n  }\n\n  getCodeFlaskRef = (codeFlask) => {\n    this.codeFlask = codeFlask\n  }\n\n  onTextChange = (code) => {\n    this.setState({code: code})\n  }\n\n  handleSnackbarClose = () => {\n    this.setState({openSnackbar: false});\n  };\n\n  render() {\n    const runningFeedback = this.state.isRunning ? <CircularProgress color=\"inherit\" size={24}/> : \"Save\"\n    return (\n      <React.Fragment>\n        <Select\n          style={{margin: \"10px 10px 10px 10px\"}}\n          native\n          value={this.state.filename}\n          onChange={this.onSelectionChange}\n          inputProps={{\n            name: 'config',\n            id: 'config',\n          }}\n        >\n          {this.state.availableConfigs.map((v) => {\n            return <option key={v.filename} value={v.filename}>{v.name}</option>\n            }\n          )}\n        </Select>\n\n        <div style={{letterSpacing: \"0em\", margin: \"10px auto 10px auto\", position: \"relative\", width: \"98%\", height: \"300px\", border: \"1px solid #ccc\"}}>\n          <CodeFlaskReact\n            code={this.state.code}\n            onChange={this.onTextChange}\n            editorRef={this.getCodeFlaskRef}\n            language={\"python\"}\n          />\n        </div>\n        <Button\n          style={{margin: \"5px 10px 5px 10px\"}}\n          color=\"primary\"\n          variant=\"contained\"\n          onClick={this.saveCurrentCode}\n          disabled={false}>\n          {runningFeedback}\n        </Button>\n        <Snackbar\n          anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n          open={this.state.openSnackbar}\n          onClose={this.handleSnackbarClose}\n          message={this.state.snackbarMsg}\n          autoHideDuration={2000}\n          key={\"edit-config-snackbar\"}\n        />\n      </React.Fragment>\n    )\n  }\n}\n\n\n\n\nfunction EditConfigContainer(){\n  const classes = useStyles();\n\n  return(\n    <React.Fragment>\n      <div>\n        <div>\n          <Typography variant=\"h5\" component=\"h2\">\n            <Box fontWeight=\"fontWeightBold\">\n              Edit config.ini\n            </Box>\n          </Typography>\n        </div>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <p>Update the <code>config.ini</code> files. The shared <code>config.ini</code> will be deployed to <em>all</em> Pioreactors, but can be overwritten with a specific Pioreactor's <code>config.ini</code>. <a href=\"https://github.com/Pioreactor/pioreactor/wiki/Configuration-via-config.ini\" target=\"_blank\">Learn more about Pioreactor configuration</a>.</p>\n          <EditableCodeDiv/>\n        </CardContent>\n      </Card>\n    </React.Fragment>\n)}\n\n\nfunction EditConfig() {\n    return (\n        <Grid container spacing={2} >\n          <Grid item xs={12}><Header /></Grid>\n          <Grid item md={12} xs={1}/>\n          <Grid item md={12} xs={1}/>\n\n          <Grid item md={1} xs={1}/>\n          <Grid item md={10} xs={12}>\n             <EditConfigContainer/>\n          </Grid>\n          <Grid item md={1} xs={1}/>\n        </Grid>\n    )\n}\n\nexport default EditConfig;\n\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nimport TactileButtonNotification from \"./components/TactileButtonNotification\";\nimport ExperimentOverview from \"./ExperimentOverview\";\nimport DownloadData from \"./DownloadData\";\nimport Pioreactors from \"./Pioreactors\";\nimport StartNewExperiment from \"./StartNewExperiment\";\nimport EditConfig from \"./EditConfig\";\n\nimport \"fontsource-roboto/300-normal.css\"\nimport \"fontsource-roboto/400-normal.css\"\nimport \"fontsource-roboto/500-normal.css\"\nimport \"fontsource-roboto/700-normal.css\"\nimport './styles.css';\nimport {parseINIString} from \"./utilities\"\n\n\nconst theme = createMuiTheme({\n  palette: {\n    background: {\n      default: \"#f6f6f7\",\n    },\n    primary: {\n      // light: will be calculated from palette.primary.main,\n      main: '#5331CA',\n      // dark: will be calculated from palette.primary.main,\n      // contrastText: will be calculated to contrast with palette.primary.main\n    },\n  },\n});\n\n\n\nfunction App() {\n\n  const [config, setConfig] = React.useState({})\n\n  React.useEffect(() => {\n\n    async function getConfig() {\n      await fetch(\"/get_config/config.ini\")\n        .then((response) => {\n            if (response.ok) {\n              return response.text();\n            } else {\n              throw new Error('Something went wrong');\n            }\n          })\n        .then((config) => {\n          setConfig(parseINIString(config)); // TODO: parse on server side and send a json object\n        })\n        .catch((error) => {})\n    }\n    getConfig();\n  }, [])\n\n  return (\n    <MuiThemeProvider theme={theme}>\n      <CssBaseline />\n      <Router>\n        <div className=\"pageContainer\">\n          <Switch>\n            <Route path=\"/download-data\">\n              <DownloadData config={config}/>\n              <TactileButtonNotification config={config}/>\n            </Route>\n            <Route path=\"/start-new-experiment\">\n              <StartNewExperiment config={config}/>\n              <TactileButtonNotification config={config}/>\n            </Route>\n            <Route path=\"/overview\">\n              <ExperimentOverview config={config}/>\n            </Route>\n            <Route path=\"/edit-config\">\n              <EditConfig config={config}/>\n              <TactileButtonNotification config={config}/>\n            </Route>\n            <Route path=\"/pioreactors\">\n              <Pioreactors config={config}/>\n            </Route>\n            <Route path=\"/\">\n              <ExperimentOverview config={config}/>\n            </Route>\n          </Switch>\n        </div>\n      </Router>\n    </MuiThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport \"./styles.css\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}